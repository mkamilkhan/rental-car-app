{"ast":null,"code":"import _objectSpread from\"/Users/EAPPLE/Desktop/dejavuadventure/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// import React, { useState, useEffect, useContext } from 'react';\n// import { useNavigate } from 'react-router-dom';\n// import axios from 'axios';\n// import { AuthContext } from '../context/AuthContext';\n// import './AdminDashboard.css';\n// const AdminDashboard = () => {\n//   const { logout } = useContext(AuthContext);\n//   const navigate = useNavigate();\n//   const [activeTab, setActiveTab] = useState('overview');\n//   const [bookings, setBookings] = useState([]);\n//   const [cars, setCars] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [showCarForm, setShowCarForm] = useState(false);\n//   const [editingCar, setEditingCar] = useState(null);\n//   const [newBookingsCount, setNewBookingsCount] = useState(0);\n//   const [lastBookingId, setLastBookingId] = useState(null);\n//   const [notifications, setNotifications] = useState([]);\n//   const handleLogout = () => {\n//     logout();\n//     navigate('/');\n//   };\n//   const [carFormData, setCarFormData] = useState({\n//     name: '',\n//     brand: '',\n//     model: '',\n//     year: new Date().getFullYear(),\n//     pricePerDay: '',\n//     price30min: '',\n//     price60min: '',\n//     currency: 'AED',\n//     seats: '',\n//     transmission: 'Automatic',\n//     fuelType: 'Petrol',\n//     imageFile: null,   // âœ… FILE\n//     imageUrl: '',      // âœ… URL\n//     description: '',\n//     available: true\n//   });\n//   const [imagePreview, setImagePreview] = useState(null);\n//   useEffect(() => {\n//     fetchBookings();\n//     fetchCars();\n//   }, []);\n//   useEffect(() => {\n//     if (activeTab === 'bookings') {\n//       fetchBookings();\n//     } else if (activeTab === 'cars') {\n//       fetchCars();\n//     }\n//   }, [activeTab]);\n//   // Poll for new bookings every 5 seconds for real-time notifications\n//   useEffect(() => {\n//     // Initial check\n//     checkNewBookings();\n//     const interval = setInterval(() => {\n//       checkNewBookings();\n//     }, 5000); // Check every 5 seconds for faster notifications\n//     return () => clearInterval(interval);\n//   }, [lastBookingId]);\n//   const checkNewBookings = async () => {\n//     try {\n//       const response = await axios.get('/api/admin/bookings');\n//       const latestBookings = response.data;\n//       if (latestBookings.length > 0) {\n//         const latestBooking = latestBookings[0];\n//         // Count all pending bookings\n//         const pendingBookings = latestBookings.filter(b => b.status === 'pending');\n//         setNewBookingsCount(pendingBookings.length);\n//         // Check if this is a new booking\n//         if (!lastBookingId || latestBooking._id !== lastBookingId) {\n//           // Add notification for new booking (any status)\n//           const newNotification = {\n//             id: Date.now(),\n//             message: `ðŸ”” New booking: ${latestBooking.car?.name || 'Unknown'} - ${latestBooking.customerName || latestBooking.user?.name || 'Guest'}`,\n//             bookingId: latestBooking._id,\n//             status: latestBooking.status,\n//             timestamp: new Date()\n//           };\n//           setNotifications(prev => {\n//             // Check if notification already exists\n//             const exists = prev.some(n => n.bookingId === latestBooking._id);\n//             if (!exists) {\n//               // Show browser notification if permission granted\n//               if ('Notification' in window && Notification.permission === 'granted') {\n//                 new Notification('New Booking Received!', {\n//                   body: newNotification.message,\n//                   icon: '/favicon.ico'\n//                 });\n//               }\n//               return [newNotification, ...prev.slice(0, 9)]; // Keep last 10\n//             }\n//             return prev;\n//           });\n//           // Update last booking ID\n//           setLastBookingId(latestBooking._id);\n//           // Refresh bookings if on bookings tab\n//           if (activeTab === 'bookings') {\n//             fetchBookings();\n//           }\n//         }\n//       }\n//     } catch (error) {\n//       console.error('Error checking new bookings:', error);\n//     }\n//   };\n//   // Request browser notification permission on mount\n//   useEffect(() => {\n//     if ('Notification' in window && Notification.permission === 'default') {\n//       Notification.requestPermission();\n//     }\n//   }, []);\n//   const fetchBookings = async () => {\n//     try {\n//       setLoading(true);\n//       const response = await axios.get('/api/admin/bookings');\n//       setBookings(response.data);\n//       // Update last booking ID and reset count when manually fetching\n//       if (response.data.length > 0) {\n//         const latestBooking = response.data[0];\n//         const pendingCount = response.data.filter(b => b.status === 'pending').length;\n//         setNewBookingsCount(pendingCount);\n//         // Set last booking ID only if not set\n//         if (!lastBookingId) {\n//           setLastBookingId(latestBooking._id);\n//         }\n//       }\n//     } catch (error) {\n//       console.error('Error fetching bookings:', error);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const fetchCars = async () => {\n//     try {\n//       setLoading(true);\n//       const response = await axios.get('/api/cars');\n//       setCars(response.data);\n//     } catch (error) {\n//       console.error('Error fetching cars:', error);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleCarFormChange = (e) => {\n//     const { name, value, type, checked, files } = e.target;\n//     if (type === 'file') {\n//       const file = files[0];\n//       if (!file) return;\n//       setCarFormData(prev => ({\n//         ...prev,\n//         imageFile: file,\n//         imageUrl: ''\n//       }));\n//       setImagePreview(URL.createObjectURL(file));\n//     } else {\n//       setCarFormData(prev => ({\n//         ...prev,\n//         [name]: type === 'checkbox' ? checked : value\n//       }));\n//     }\n//   };\n//   const handleCarSubmit = async (e) => {\n//     e.preventDefault();\n//     try {\n//       const formData = new FormData();\n//       Object.entries(carFormData).forEach(([key, value]) => {\n//         if (value !== null && value !== '') {\n//           formData.append(key, value);\n//         }\n//       });\n//       await axios.post('/api/admin/cars', formData, {\n//         headers: { 'Content-Type': 'multipart/form-data' }\n//       });\n//       alert('Car added successfully!');\n//       fetchCars();\n//       setShowCarForm(false);\n//     } catch (err) {\n//       alert('Image upload failed');\n//     }\n//   };\n//   const handleEditCar = (car) => {\n//     setEditingCar(car);\n//     setCarFormData({\n//       name: car.name,\n//       brand: car.brand,\n//       model: car.model,\n//       year: car.year,\n//       pricePerDay: car.pricePerDay,\n//       price30min: car.price30min || '',\n//       price60min: car.price60min || '',\n//       currency: car.currency || 'AED',\n//       seats: car.seats,\n//       transmission: car.transmission,\n//       fuelType: car.fuelType,\n//       image: car.image,\n//       description: car.description || '',\n//       available: car.available\n//     });\n//     setShowCarForm(true);\n//   };\n//   const handleDeleteCar = async (carId) => {\n//     if (!window.confirm('Are you sure you want to delete this car?')) {\n//       return;\n//     }\n//     try {\n//       await axios.delete(`/api/admin/cars/${carId}`);\n//       fetchCars();\n//     } catch (error) {\n//       alert(error.response?.data?.message || 'Failed to delete car');\n//     }\n//   };\n//   const handleToggleAvailability = async (carId, currentStatus) => {\n//     try {\n//       await axios.put(`/api/admin/cars/${carId}`, {\n//         available: !currentStatus\n//       });\n//       fetchCars();\n//     } catch (error) {\n//       alert(error.response?.data?.message || 'Failed to update availability');\n//     }\n//   };\n//   const handleUpdateBookingStatus = async (bookingId, status) => {\n//     try {\n//       await axios.put(`/api/admin/bookings/${bookingId}/status`, { status });\n//       fetchBookings();\n//     } catch (error) {\n//       alert(error.response?.data?.message || 'Failed to update status');\n//     }\n//   };\n//   const handleCancelBooking = async (bookingId) => {\n//     if (!window.confirm('Are you sure you want to cancel this booking?')) {\n//       return;\n//     }\n//     try {\n//       await axios.put(`/api/bookings/${bookingId}/cancel`);\n//       fetchBookings();\n//     } catch (error) {\n//       alert(error.response?.data?.message || 'Failed to cancel booking');\n//     }\n//   };\n//   // Calculate stats\n//   const activeBookings = bookings.filter(b => \n//     b.status === 'pending' || b.status === 'confirmed'\n//   );\n//   const bookedCarIds = [...new Set(activeBookings.map(b => b.car?._id?.toString()).filter(Boolean))];\n//   const stats = {\n//     totalCars: cars.length,\n//     availableCars: cars.filter(car => !bookedCarIds.includes(car._id.toString())).length,\n//     bookedCars: bookedCarIds.length,\n//     totalBookings: bookings.length,\n//     pendingBookings: bookings.filter(b => b.status === 'pending').length,\n//     confirmedBookings: bookings.filter(b => b.status === 'confirmed').length,\n//     cancelledBookings: bookings.filter(b => b.status === 'cancelled').length,\n//     totalRevenue: bookings\n//       .filter(b => b.status === 'confirmed')\n//       .reduce((sum, b) => sum + (b.totalPrice || 0), 0)\n//   };\n//   const getStatusBadge = (status) => {\n//     const statusMap = {\n//       pending: { class: 'status-pending', text: 'Pending' },\n//       confirmed: { class: 'status-confirmed', text: 'Approved' },\n//       cancelled: { class: 'status-cancelled', text: 'Cancelled' }\n//     };\n//     const statusInfo = statusMap[status] || statusMap.pending;\n//     return <span className={`status-badge ${statusInfo.class}`}>{statusInfo.text}</span>;\n//   };\n//   return (\n//     <div className=\"admin-dashboard\">\n//       <div className=\"container\">\n//         <div className=\"admin-header\">\n//           <div className=\"admin-header-left\">\n//             <h1>Admin Dashboard</h1>\n//             {newBookingsCount > 0 && (\n//               <div className=\"notification-badge\" onClick={() => setActiveTab('bookings')}>\n//                 <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                   <path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"/>\n//                   <path d=\"M13.73 21a2 2 0 0 1-3.46 0\"/>\n//                 </svg>\n//                 <span className=\"notification-count\">{newBookingsCount}</span>\n//                 <span className=\"notification-text\">New Booking{newBookingsCount > 1 ? 's' : ''}</span>\n//               </div>\n//             )}\n//           </div>\n//           <button onClick={handleLogout} className=\"btn-logout-admin\">\n//             <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n//               <path d=\"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9M16 17L21 12M21 12L16 7M21 12H9\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n//             </svg>\n//             Logout\n//           </button>\n//         </div>\n//         {/* Notifications List */}\n//         {notifications.length > 0 && (\n//           <div className=\"notifications-panel\">\n//             <div className=\"notifications-header\">\n//               <h3>ðŸ“¬ Recent Notifications</h3>\n//               <button onClick={() => { setNotifications([]); setNewBookingsCount(0); }} className=\"btn-clear-notifications\">\n//                 Clear All\n//               </button>\n//             </div>\n//             <div className=\"notifications-list\">\n//               {notifications.map((notif) => (\n//                 <div key={notif.id} className=\"notification-item\" onClick={() => { setActiveTab('bookings'); setNewBookingsCount(0); }}>\n//                   <div className=\"notification-icon\">ðŸ””</div>\n//                   <div className=\"notification-content\">\n//                     <p className=\"notification-message\">{notif.message}</p>\n//                     <span className=\"notification-time\">\n//                       {new Date(notif.timestamp).toLocaleTimeString()}\n//                     </span>\n//                   </div>\n//                 </div>\n//               ))}\n//             </div>\n//           </div>\n//         )}\n//         <div className=\"admin-tabs\">\n//           <button\n//             className={activeTab === 'overview' ? 'active' : ''}\n//             onClick={() => setActiveTab('overview')}\n//           >\n//             Overview\n//           </button>\n//           <button\n//             className={activeTab === 'bookings' ? 'active' : ''}\n//             onClick={() => setActiveTab('bookings')}\n//           >\n//             Bookings\n//           </button>\n//           <button\n//             className={activeTab === 'cars' ? 'active' : ''}\n//             onClick={() => setActiveTab('cars')}\n//           >\n//             Cars\n//           </button>\n//         </div>\n//         {activeTab === 'overview' && (\n//           <div className=\"admin-overview\">\n//             <div className=\"stats-grid\">\n//               <div className=\"stat-card stat-primary\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M9 17V7M9 7L5 11M9 7L13 11M15 7V17M15 17L19 13M15 17L11 13\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.totalCars}</h3>\n//                   <p>Total Vehicles</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-success\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.availableCars}</h3>\n//                   <p>Available Cars</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-warning\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.bookedCars}</h3>\n//                   <p>Booked Cars</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-info\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.totalBookings}</h3>\n//                   <p>Total Bookings</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-pending\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M12 8V12L15 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.pendingBookings}</h3>\n//                   <p>Pending</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-revenue\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M12 2V22M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6312 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6312 13.6815 18 14.5717 18 15.5C18 16.4283 17.6312 17.3185 16.9749 17.9749C16.3185 18.6312 15.4283 19 14.5 19H6\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.totalRevenue.toLocaleString()} AED</h3>\n//                   <p>Total Revenue</p>\n//                 </div>\n//               </div>\n//             </div>\n//             <div className=\"charts-section\">\n//               {/* Vehicle Status - Bar Chart */}\n//               <div className=\"chart-card\">\n//                 <h3>ðŸš— Vehicle Status - Bar Chart</h3>\n//                 <div className=\"bar-chart-container\">\n//                   <div className=\"bar-chart\">\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-total-vehicles\" \n//                           style={{ height: `${Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1) > 0 ? (stats.totalCars / Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{stats.totalCars}</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Total Vehicles</div>\n//                     </div>\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-pending\" \n//                           style={{ height: `${Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1) > 0 ? (stats.pendingBookings / Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{stats.pendingBookings}</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Pending</div>\n//                     </div>\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-revenue\" \n//                           style={{ height: `${Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1) > 0 ? (Math.floor(stats.totalRevenue / 1000) / Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{Math.floor(stats.totalRevenue / 1000)}K</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Total Revenue (AED)</div>\n//                     </div>\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-available\" \n//                           style={{ height: `${stats.totalCars > 0 ? (stats.availableCars / Math.max(stats.availableCars, stats.bookedCars, 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{stats.availableCars}</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Available</div>\n//                     </div>\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-booked\" \n//                           style={{ height: `${stats.totalCars > 0 ? (stats.bookedCars / Math.max(stats.availableCars, stats.bookedCars, 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{stats.bookedCars}</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Booked</div>\n//                     </div>\n//                   </div>\n//                 </div>\n//               </div>\n//               {/* Booking Status - Pie Chart */}\n//               <div className=\"chart-card\">\n//                 <h3>ðŸ“Š Booking Status - Pie Chart</h3>\n//                 <div className=\"pie-chart-container\">\n//                   <div className=\"pie-chart-wrapper\">\n//                     <svg className=\"pie-chart\" viewBox=\"0 0 200 200\">\n//                       {(() => {\n//                         const total = stats.totalBookings || 1;\n//                         const pendingPercent = (stats.pendingBookings / total) * 100;\n//                         const confirmedPercent = (stats.confirmedBookings / total) * 100;\n//                         const cancelledPercent = (stats.cancelledBookings / total) * 100;\n//                         let currentPercent = 0;\n//                         const radius = 80;\n//                         const centerX = 100;\n//                         const centerY = 100;\n//                         const createArc = (percent, color) => {\n//                           if (percent === 0) return null;\n//                           const startAngle = (currentPercent / 100) * 360 - 90;\n//                           const endAngle = ((currentPercent + percent) / 100) * 360 - 90;\n//                           currentPercent += percent;\n//                           const startAngleRad = (startAngle * Math.PI) / 180;\n//                           const endAngleRad = (endAngle * Math.PI) / 180;\n//                           const x1 = centerX + radius * Math.cos(startAngleRad);\n//                           const y1 = centerY + radius * Math.sin(startAngleRad);\n//                           const x2 = centerX + radius * Math.cos(endAngleRad);\n//                           const y2 = centerY + radius * Math.sin(endAngleRad);\n//                           const largeArcFlag = percent > 50 ? 1 : 0;\n//                           return (\n//                             <path\n//                               d={`M ${centerX} ${centerY} L ${x1} ${y1} A ${radius} ${radius} 0 ${largeArcFlag} 1 ${x2} ${y2} Z`}\n//                               fill={color}\n//                               stroke=\"#fff\"\n//                               strokeWidth=\"3\"\n//                             />\n//                           );\n//                         };\n//                         return (\n//                           <>\n//                             {createArc(pendingPercent, '#FF6B6B')}\n//                             {createArc(confirmedPercent, '#51CF66')}\n//                             {createArc(cancelledPercent, '#FF8787')}\n//                           </>\n//                         );\n//                       })()}\n//                       <circle cx=\"100\" cy=\"100\" r=\"60\" fill=\"white\" />\n//                       <text x=\"100\" y=\"95\" textAnchor=\"middle\" fontSize=\"24\" fontWeight=\"800\" fill=\"#1e3c72\">\n//                         {stats.totalBookings}\n//                       </text>\n//                       <text x=\"100\" y=\"115\" textAnchor=\"middle\" fontSize=\"14\" fill=\"#666\" fontWeight=\"600\">\n//                         Total Bookings\n//                       </text>\n//                     </svg>\n//                   </div>\n//                   <div className=\"pie-legend\">\n//                     <div className=\"legend-item\">\n//                       <span className=\"legend-color\" style={{background: 'linear-gradient(135deg, #FF6B6B 0%, #FF8787 100%)'}}></span>\n//                       <span className=\"legend-label\">Pending ({stats.pendingBookings})</span>\n//                     </div>\n//                     <div className=\"legend-item\">\n//                       <span className=\"legend-color\" style={{background: 'linear-gradient(135deg, #51CF66 0%, #69DB7C 100%)'}}></span>\n//                       <span className=\"legend-label\">Approved ({stats.confirmedBookings})</span>\n//                     </div>\n//                     <div className=\"legend-item\">\n//                       <span className=\"legend-color\" style={{background: 'linear-gradient(135deg, #FF8787 0%, #FF6B6B 100%)'}}></span>\n//                       <span className=\"legend-label\">Cancelled ({stats.cancelledBookings})</span>\n//                     </div>\n//                   </div>\n//                 </div>\n//               </div>\n//             </div>\n//           </div>\n//         )}\n//         {activeTab === 'bookings' && (\n//           <div className=\"admin-section\">\n//             <div className=\"section-header-bookings\">\n//               <h2>All Bookings ({bookings.length})</h2>\n//               <p>Manage and track all vehicle bookings</p>\n//             </div>\n//             {loading ? (\n//               <div className=\"loading\">Loading bookings...</div>\n//             ) : (\n//               <div className=\"bookings-table\">\n//                 {bookings.length === 0 ? (\n//                   <div className=\"no-bookings\">\n//                     <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{width: '60px', height: '60px', color: '#ccc', marginBottom: '20px'}}>\n//                       <path d=\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01\"/>\n//                     </svg>\n//                     <p>No bookings found.</p>\n//                     <p style={{color: '#999', fontSize: '14px'}}>Bookings will appear here once customers make reservations.</p>\n//                   </div>\n//                 ) : (\n//                   bookings.map((booking) => {\n//                     if (!booking.car) {\n//                       return null;\n//                     }\n//                     const customerName = booking.customerName || booking.user?.name || 'Guest';\n//                     const customerEmail = booking.customerEmail || booking.user?.email || 'N/A';\n//                     return (\n//                       <div key={booking._id} className=\"booking-row\">\n//                         <div className=\"booking-info\">\n//                           <h4>{booking.car?.name || 'Unknown Car'}</h4>\n//                           <p>Customer: {customerName} ({customerEmail})</p>\n//                           {booking.contactNumber && <p>Contact: {booking.contactNumber}</p>}\n//                           <p>\n//                             {new Date(booking.startDate).toLocaleDateString()} -{' '}\n//                             {new Date(booking.endDate).toLocaleDateString()}\n//                           </p>\n//                           {booking.pickupLocation && <p>Location: {booking.pickupLocation}</p>}\n//                           <p>Total: {booking.totalPrice} {booking.car?.currency || 'AED'}</p>\n//                         </div>\n//                         <div className=\"booking-actions\">\n//                           {getStatusBadge(booking.status)}\n//                           <select\n//                             value={booking.status}\n//                             onChange={(e) => handleUpdateBookingStatus(booking._id, e.target.value)}\n//                             className=\"status-select\"\n//                           >\n//                             <option value=\"pending\">Pending</option>\n//                             <option value=\"confirmed\">Approved</option>\n//                             <option value=\"cancelled\">Cancelled</option>\n//                           </select>\n//                           {booking.status !== 'cancelled' && (\n//                             <button\n//                               onClick={() => handleCancelBooking(booking._id)}\n//                               className=\"btn-cancel-booking\"\n//                             >\n//                               Cancel Booking\n//                             </button>\n//                           )}\n//                         </div>\n//                       </div>\n//                     );\n//                   })\n//                 )}\n//               </div>\n//             )}\n//           </div>\n//         )}\n//         {activeTab === 'cars' && (\n//           <div className=\"admin-section\">\n//             <button\n//               onClick={() => {\n//                 setShowCarForm(true);\n//                 setEditingCar(null);\n//                 setCarFormData({\n//                   name: '',\n//                   brand: '',\n//                   model: '',\n//                   year: new Date().getFullYear(),\n//                   pricePerDay: '',\n//                   price30min: '',\n//                   price60min: '',\n//                   currency: 'AED',\n//                   seats: '',\n//                   transmission: 'Automatic',\n//                   fuelType: 'Petrol',\n//                   image: '',\n//                   description: '',\n//                   available: true\n//                 });\n//               }}\n//               className=\"btn-add-car\"\n//             >\n//               <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                 <path d=\"M12 5V19M5 12H19\"/>\n//               </svg>\n//               Add New Car\n//             </button>\n//             {showCarForm && (\n//               <div className=\"car-form-modal\">\n//                 <div className=\"car-form-content\">\n//                   <h3>{editingCar ? 'Edit Car' : 'Add New Car'}</h3>\n//                   <form onSubmit={handleCarSubmit}>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Name *</label>\n//                         <input\n//                           type=\"text\"\n//                           name=\"name\"\n//                           value={carFormData.name}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         />\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Brand *</label>\n//                         <input\n//                           type=\"text\"\n//                           name=\"brand\"\n//                           value={carFormData.brand}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         />\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Model *</label>\n//                         <input\n//                           type=\"text\"\n//                           name=\"model\"\n//                           value={carFormData.model}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         />\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Year *</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"year\"\n//                           value={carFormData.year}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         />\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Price per Day ({carFormData.currency || 'AED'}) *</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"pricePerDay\"\n//                           value={carFormData.pricePerDay}\n//                           onChange={handleCarFormChange}\n//                           required\n//                           min=\"0\"\n//                         />\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Price 60min ({carFormData.currency || 'AED'})</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"price60min\"\n//                           value={carFormData.price60min}\n//                           onChange={handleCarFormChange}\n//                           min=\"0\"\n//                         />\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Price 30min ({carFormData.currency || 'AED'})</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"price30min\"\n//                           value={carFormData.price30min}\n//                           onChange={handleCarFormChange}\n//                           min=\"0\"\n//                         />\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Currency</label>\n//                         <select\n//                           name=\"currency\"\n//                           value={carFormData.currency}\n//                           onChange={handleCarFormChange}\n//                         >\n//                           <option value=\"AED\">AED</option>\n//                           <option value=\"USD\">USD</option>\n//                           <option value=\"EUR\">EUR</option>\n//                         </select>\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Seats *</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"seats\"\n//                           value={carFormData.seats}\n//                           onChange={handleCarFormChange}\n//                           required\n//                           min=\"1\"\n//                         />\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Transmission *</label>\n//                         <select\n//                           name=\"transmission\"\n//                           value={carFormData.transmission}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         >\n//                           <option value=\"Manual\">Manual</option>\n//                           <option value=\"Automatic\">Automatic</option>\n//                         </select>\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Fuel Type *</label>\n//                         <select\n//                           name=\"fuelType\"\n//                           value={carFormData.fuelType}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         >\n//                           <option value=\"Petrol\">Petrol</option>\n//                           <option value=\"Diesel\">Diesel</option>\n//                           <option value=\"Electric\">Electric</option>\n//                           <option value=\"Hybrid\">Hybrid</option>\n//                         </select>\n//                       </div>\n//                     </div>\n//                     <div className=\"form-group\">\n//   <label>Vehicle Image *</label>\n//   <input\n//     type=\"file\"\n//     accept=\"image/*\"\n//     onChange={handleCarFormChange}\n//   />\n//   <input\n//     type=\"text\"\n//     name=\"imageUrl\"\n//     placeholder=\"OR paste image URL\"\n//     value={carFormData.imageUrl}\n//     onChange={(e) => {\n//       setCarFormData(prev => ({\n//         ...prev,\n//         imageUrl: e.target.value,\n//         imageFile: null\n//       }));\n//       setImagePreview(e.target.value);\n//     }}\n//     style={{ marginTop: '10px' }}\n//   />\n//   {imagePreview && (\n//     <div style={{ marginTop: '10px' }}>\n//       <img\n//         src={imagePreview}\n//         alt=\"preview\"\n//         style={{ width: '100%', height: '150px', objectFit: 'cover' }}\n//       />\n//       <button\n//         type=\"button\"\n//         onClick={() => {\n//           setCarFormData(prev => ({\n//             ...prev,\n//             imageFile: null,\n//             imageUrl: ''\n//           }));\n//           setImagePreview(null);\n//         }}\n//       >\n//         Remove\n//       </button>\n//     </div>\n//   )}\n// </div>\n//                     <div className=\"form-group\">\n//                       <label>Description</label>\n//                       <textarea\n//                         name=\"description\"\n//                         value={carFormData.description}\n//                         onChange={handleCarFormChange}\n//                         rows=\"3\"\n//                       />\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>\n//                         <input\n//                           type=\"checkbox\"\n//                           name=\"available\"\n//                           checked={carFormData.available}\n//                           onChange={handleCarFormChange}\n//                         />\n//                         Available\n//                       </label>\n//                     </div>\n//                     <div className=\"form-actions\">\n//                       <button type=\"submit\" className=\"btn btn-primary\">\n//                         {editingCar ? 'Update Car' : 'Add Car'}\n//                       </button>\n//                       <button\n//                         type=\"button\"\n//                         onClick={() => {\n//                           setShowCarForm(false);\n//                           setEditingCar(null);\n//                         }}\n//                         className=\"btn btn-secondary\"\n//                       >\n//                         Cancel\n//                       </button>\n//                     </div>\n//                   </form>\n//                 </div>\n//               </div>\n//             )}\n//             {loading ? (\n//               <div className=\"loading\">Loading cars...</div>\n//             ) : (\n//               <div className=\"cars-grid\">\n//                 {cars.map((car) => (\n//                   <div key={car._id} className={`car-admin-card ${!car.available ? 'car-unavailable' : ''}`}>\n//                     <div className=\"car-image-wrapper-admin\">\n//                       <img src={car.image} alt={car.name} />\n//                       {car.available ? (\n//                         <span className=\"availability-badge-admin available\">âœ“ Available</span>\n//                       ) : (\n//                         <span className=\"availability-badge-admin unavailable\">âœ— Not Available</span>\n//                       )}\n//                     </div>\n//                     <div className=\"car-admin-info\">\n//                       <h4>{car.name}</h4>\n//                       <p>{car.brand} {car.model} ({car.year})</p>\n//                       <p>{car.price60min ? `${car.price60min} ${car.currency || 'AED'}/60min` : `${car.pricePerDay} ${car.currency || 'AED'}/day`}</p>\n//                       <div className=\"car-admin-actions\">\n//                         <button\n//                           onClick={() => handleToggleAvailability(car._id, car.available)}\n//                           className={`btn ${car.available ? 'btn-warning' : 'btn-success'}`}\n//                           title={car.available ? 'Mark as Not Available' : 'Mark as Available'}\n//                         >\n//                           {car.available ? 'âœ— Mark Unavailable' : 'âœ“ Mark Available'}\n//                         </button>\n//                         <button\n//                           onClick={() => handleEditCar(car)}\n//                           className=\"btn btn-secondary\"\n//                         >\n//                           Edit\n//                         </button>\n//                         <button\n//                           onClick={() => handleDeleteCar(car._id)}\n//                           className=\"btn btn-danger\"\n//                         >\n//                           Delete\n//                         </button>\n//                       </div>\n//                     </div>\n//                   </div>\n//                 ))}\n//               </div>\n//             )}\n//           </div>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n// export default AdminDashboard;\nimport React,{useState,useEffect,useContext}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{AuthContext}from'../context/AuthContext';import'./AdminDashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=()=>{const{logout}=useContext(AuthContext);const navigate=useNavigate();const[activeTab,setActiveTab]=useState('overview');const[bookings,setBookings]=useState([]);const[cars,setCars]=useState([]);const[loading,setLoading]=useState(true);const[showCarForm,setShowCarForm]=useState(false);const[editingCar,setEditingCar]=useState(null);const[newBookingsCount,setNewBookingsCount]=useState(0);const[lastBookingId,setLastBookingId]=useState(null);const[notifications,setNotifications]=useState([]);const handleLogout=()=>{logout();navigate('/');};const[carFormData,setCarFormData]=useState({name:'',brand:'',model:'',year:new Date().getFullYear(),pricePerDay:'',price30min:'',price60min:'',currency:'AED',seats:'',transmission:'Automatic',fuelType:'Petrol',imageFile:null,imageUrl:'',description:'',available:true});const[imagePreview,setImagePreview]=useState(null);useEffect(()=>{fetchBookings();fetchCars();},[]);useEffect(()=>{if(activeTab==='bookings'){fetchBookings();}else if(activeTab==='cars'){fetchCars();}},[activeTab]);useEffect(()=>{checkNewBookings();const interval=setInterval(()=>{checkNewBookings();},5000);return()=>clearInterval(interval);},[lastBookingId]);const checkNewBookings=async()=>{try{const response=await axios.get('/api/admin/bookings');const latestBookings=response.data;if(latestBookings.length>0){const latestBooking=latestBookings[0];const pendingBookings=latestBookings.filter(b=>b.status==='pending');setNewBookingsCount(pendingBookings.length);if(!lastBookingId||latestBooking._id!==lastBookingId){var _latestBooking$car,_latestBooking$user;const newNotification={id:Date.now(),message:\"\\uD83D\\uDD14 New booking: \".concat(((_latestBooking$car=latestBooking.car)===null||_latestBooking$car===void 0?void 0:_latestBooking$car.name)||'Unknown',\" - \").concat(latestBooking.customerName||((_latestBooking$user=latestBooking.user)===null||_latestBooking$user===void 0?void 0:_latestBooking$user.name)||'Guest'),bookingId:latestBooking._id,status:latestBooking.status,timestamp:new Date()};setNotifications(prev=>{const exists=prev.some(n=>n.bookingId===latestBooking._id);if(!exists){if('Notification'in window&&Notification.permission==='granted'){new Notification('New Booking Received!',{body:newNotification.message,icon:'/favicon.ico'});}return[newNotification,...prev.slice(0,9)];}return prev;});setLastBookingId(latestBooking._id);if(activeTab==='bookings'){fetchBookings();}}}}catch(error){console.error('Error checking new bookings:',error);}};useEffect(()=>{if('Notification'in window&&Notification.permission==='default'){Notification.requestPermission();}},[]);const fetchBookings=async()=>{try{setLoading(true);const response=await axios.get('/api/admin/bookings');setBookings(response.data);if(response.data.length>0){const latestBooking=response.data[0];const pendingCount=response.data.filter(b=>b.status==='pending').length;setNewBookingsCount(pendingCount);if(!lastBookingId){setLastBookingId(latestBooking._id);}}}catch(error){console.error('Error fetching bookings:',error);}finally{setLoading(false);}};const fetchCars=async()=>{try{setLoading(true);const response=await axios.get('/api/cars');setCars(response.data);}catch(error){console.error('Error fetching cars:',error);}finally{setLoading(false);}};const handleCarFormChange=e=>{const{name,value,type,checked,files}=e.target;if(type==='file'){const file=files[0];if(!file)return;setCarFormData(prev=>_objectSpread(_objectSpread({},prev),{},{imageFile:file,imageUrl:''}));setImagePreview(URL.createObjectURL(file));}else{setCarFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));}};const handleCarSubmit=async e=>{e.preventDefault();try{const formData=new FormData();Object.entries(carFormData).forEach(_ref=>{let[key,value]=_ref;if(value!==null&&value!==''){formData.append(key,value);}});await axios.post('/api/admin/cars',formData,{headers:{'Content-Type':'multipart/form-data'}});alert('Car added successfully!');fetchCars();setShowCarForm(false);}catch(err){alert('Image upload failed');}};const handleEditCar=car=>{setEditingCar(car);setCarFormData({name:car.name,brand:car.brand,model:car.model,year:car.year,pricePerDay:car.pricePerDay,price30min:car.price30min||'',price60min:car.price60min||'',currency:car.currency||'AED',seats:car.seats,transmission:car.transmission,fuelType:car.fuelType,image:car.image,description:car.description||'',available:car.available});setShowCarForm(true);};const handleDeleteCar=async carId=>{if(!window.confirm('Are you sure you want to delete this car?')){return;}try{await axios.delete(\"/api/admin/cars/\".concat(carId));fetchCars();}catch(error){var _error$response,_error$response$data;alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to delete car');}};const handleToggleAvailability=async(carId,currentStatus)=>{try{await axios.put(\"/api/admin/cars/\".concat(carId),{available:!currentStatus});fetchCars();}catch(error){var _error$response2,_error$response2$data;alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to update availability');}};const handleUpdateBookingStatus=async(bookingId,status)=>{try{await axios.put(\"/api/admin/bookings/\".concat(bookingId,\"/status\"),{status});fetchBookings();}catch(error){var _error$response3,_error$response3$data;alert(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to update status');}};const handleCancelBooking=async bookingId=>{if(!window.confirm('Are you sure you want to cancel this booking?')){return;}try{await axios.put(\"/api/bookings/\".concat(bookingId,\"/cancel\"));fetchBookings();}catch(error){var _error$response4,_error$response4$data;alert(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to cancel booking');}};const activeBookings=bookings.filter(b=>b.status==='pending'||b.status==='confirmed');const bookedCarIds=[...new Set(activeBookings.map(b=>{var _b$car,_b$car$_id;return(_b$car=b.car)===null||_b$car===void 0?void 0:(_b$car$_id=_b$car._id)===null||_b$car$_id===void 0?void 0:_b$car$_id.toString();}).filter(Boolean))];const stats={totalCars:cars.length,availableCars:cars.filter(car=>!bookedCarIds.includes(car._id.toString())).length,bookedCars:bookedCarIds.length,totalBookings:bookings.length,pendingBookings:bookings.filter(b=>b.status==='pending').length,confirmedBookings:bookings.filter(b=>b.status==='confirmed').length,cancelledBookings:bookings.filter(b=>b.status==='cancelled').length,totalRevenue:bookings.filter(b=>b.status==='confirmed').reduce((sum,b)=>sum+(b.totalPrice||0),0)};const getStatusBadge=status=>{const statusMap={pending:{class:'status-pending',text:'Pending'},confirmed:{class:'status-confirmed',text:'Approved'},cancelled:{class:'status-cancelled',text:'Cancelled'}};const statusInfo=statusMap[status]||statusMap.pending;return/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(statusInfo.class),children:statusInfo.text});};return/*#__PURE__*/_jsx(\"div\",{className:\"admin-dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-header-left\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Dashboard\"}),newBookingsCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"notification-badge\",onClick:()=>setActiveTab('bookings'),children:[/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M13.73 21a2 2 0 0 1-3.46 0\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"notification-count\",children:newBookingsCount}),/*#__PURE__*/_jsxs(\"span\",{className:\"notification-text\",children:[\"New Booking\",newBookingsCount>1?'s':'']})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"btn-logout-admin\",children:[/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9M16 17L21 12M21 12L16 7M21 12H9\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})}),\"Logout\"]})]}),notifications.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"notifications-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"notifications-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCEC Recent Notifications\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setNotifications([]);setNewBookingsCount(0);},className:\"btn-clear-notifications\",children:\"Clear All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"notifications-list\",children:notifications.map(notif=>/*#__PURE__*/_jsxs(\"div\",{className:\"notification-item\",onClick:()=>{setActiveTab('bookings');setNewBookingsCount(0);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"notification-icon\",children:\"\\uD83D\\uDD14\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"notification-content\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"notification-message\",children:notif.message}),/*#__PURE__*/_jsx(\"span\",{className:\"notification-time\",children:new Date(notif.timestamp).toLocaleTimeString()})]})]},notif.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:activeTab==='overview'?'active':'',onClick:()=>setActiveTab('overview'),children:\"Overview\"}),/*#__PURE__*/_jsx(\"button\",{className:activeTab==='bookings'?'active':'',onClick:()=>setActiveTab('bookings'),children:\"Bookings\"}),/*#__PURE__*/_jsx(\"button\",{className:activeTab==='cars'?'active':'',onClick:()=>setActiveTab('cars'),children:\"Cars\"})]}),activeTab==='overview'&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-overview\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-primary\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9 17V7M9 7L5 11M9 7L13 11M15 7V17M15 17L19 13M15 17L11 13\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.totalCars}),/*#__PURE__*/_jsx(\"p\",{children:\"Total Vehicles\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-success\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.availableCars}),/*#__PURE__*/_jsx(\"p\",{children:\"Available Cars\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-warning\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.bookedCars}),/*#__PURE__*/_jsx(\"p\",{children:\"Booked Cars\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.totalBookings}),/*#__PURE__*/_jsx(\"p\",{children:\"Total Bookings\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-pending\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 8V12L15 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.pendingBookings}),/*#__PURE__*/_jsx(\"p\",{children:\"Pending\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-revenue\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2V22M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6312 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6312 13.6815 18 14.5717 18 15.5C18 16.4283 17.6312 17.3185 16.9749 17.9749C16.3185 18.6312 15.4283 19 14.5 19H6\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[stats.totalRevenue.toLocaleString(),\" AED\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Total Revenue\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"charts-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDE97 Vehicle Status - Bar Chart\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-chart-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bar-chart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bar-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar-column-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bar-column bar-total-vehicles\",style:{height:\"\".concat(Math.max(stats.totalCars,stats.pendingBookings,Math.floor(stats.totalRevenue/1000),1)>0?stats.totalCars/Math.max(stats.totalCars,stats.pendingBookings,Math.floor(stats.totalRevenue/1000),1)*100:0,\"%\")},children:/*#__PURE__*/_jsx(\"span\",{className:\"bar-count\",children:stats.totalCars})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-label\",children:\"Total Vehicles\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bar-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar-column-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bar-column bar-pending\",style:{height:\"\".concat(Math.max(stats.totalCars,stats.pendingBookings,Math.floor(stats.totalRevenue/1000),1)>0?stats.pendingBookings/Math.max(stats.totalCars,stats.pendingBookings,Math.floor(stats.totalRevenue/1000),1)*100:0,\"%\")},children:/*#__PURE__*/_jsx(\"span\",{className:\"bar-count\",children:stats.pendingBookings})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-label\",children:\"Pending\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bar-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar-column-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bar-column bar-revenue\",style:{height:\"\".concat(Math.max(stats.totalCars,stats.pendingBookings,Math.floor(stats.totalRevenue/1000),1)>0?Math.floor(stats.totalRevenue/1000)/Math.max(stats.totalCars,stats.pendingBookings,Math.floor(stats.totalRevenue/1000),1)*100:0,\"%\")},children:/*#__PURE__*/_jsxs(\"span\",{className:\"bar-count\",children:[Math.floor(stats.totalRevenue/1000),\"K\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-label\",children:\"Total Revenue (AED)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bar-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar-column-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bar-column bar-available\",style:{height:\"\".concat(stats.totalCars>0?stats.availableCars/Math.max(stats.availableCars,stats.bookedCars,1)*100:0,\"%\")},children:/*#__PURE__*/_jsx(\"span\",{className:\"bar-count\",children:stats.availableCars})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-label\",children:\"Available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bar-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar-column-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bar-column bar-booked\",style:{height:\"\".concat(stats.totalCars>0?stats.bookedCars/Math.max(stats.availableCars,stats.bookedCars,1)*100:0,\"%\")},children:/*#__PURE__*/_jsx(\"span\",{className:\"bar-count\",children:stats.bookedCars})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-label\",children:\"Booked\"})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Booking Status - Pie Chart\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pie-chart-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pie-chart-wrapper\",children:/*#__PURE__*/_jsxs(\"svg\",{className:\"pie-chart\",viewBox:\"0 0 200 200\",children:[(()=>{const total=stats.totalBookings||1;const pendingPercent=stats.pendingBookings/total*100;const confirmedPercent=stats.confirmedBookings/total*100;const cancelledPercent=stats.cancelledBookings/total*100;let currentPercent=0;const radius=80;const centerX=100;const centerY=100;const createArc=(percent,color)=>{if(percent===0)return null;const startAngle=currentPercent/100*360-90;const endAngle=(currentPercent+percent)/100*360-90;currentPercent+=percent;const startAngleRad=startAngle*Math.PI/180;const endAngleRad=endAngle*Math.PI/180;const x1=centerX+radius*Math.cos(startAngleRad);const y1=centerY+radius*Math.sin(startAngleRad);const x2=centerX+radius*Math.cos(endAngleRad);const y2=centerY+radius*Math.sin(endAngleRad);const largeArcFlag=percent>50?1:0;return/*#__PURE__*/_jsx(\"path\",{d:\"M \".concat(centerX,\" \").concat(centerY,\" L \").concat(x1,\" \").concat(y1,\" A \").concat(radius,\" \").concat(radius,\" 0 \").concat(largeArcFlag,\" 1 \").concat(x2,\" \").concat(y2,\" Z\"),fill:color,stroke:\"#fff\",strokeWidth:\"3\"});};return/*#__PURE__*/_jsxs(_Fragment,{children:[createArc(pendingPercent,'#FF6B6B'),createArc(confirmedPercent,'#51CF66'),createArc(cancelledPercent,'#FF8787')]});})(),/*#__PURE__*/_jsx(\"circle\",{cx:\"100\",cy:\"100\",r:\"60\",fill:\"white\"}),/*#__PURE__*/_jsx(\"text\",{x:\"100\",y:\"95\",textAnchor:\"middle\",fontSize:\"24\",fontWeight:\"800\",fill:\"#1e3c72\",children:stats.totalBookings}),/*#__PURE__*/_jsx(\"text\",{x:\"100\",y:\"115\",textAnchor:\"middle\",fontSize:\"14\",fill:\"#666\",fontWeight:\"600\",children:\"Total Bookings\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pie-legend\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-color\",style:{background:'linear-gradient(135deg, #FF6B6B 0%, #FF8787 100%)'}}),/*#__PURE__*/_jsxs(\"span\",{className:\"legend-label\",children:[\"Pending (\",stats.pendingBookings,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-color\",style:{background:'linear-gradient(135deg, #51CF66 0%, #69DB7C 100%)'}}),/*#__PURE__*/_jsxs(\"span\",{className:\"legend-label\",children:[\"Approved (\",stats.confirmedBookings,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-color\",style:{background:'linear-gradient(135deg, #FF8787 0%, #FF6B6B 100%)'}}),/*#__PURE__*/_jsxs(\"span\",{className:\"legend-label\",children:[\"Cancelled (\",stats.cancelledBookings,\")\"]})]})]})]})]})]})]}),activeTab==='bookings'&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header-bookings\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"All Bookings (\",bookings.length,\")\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage and track all vehicle bookings\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading bookings...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"bookings-table\",children:bookings.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-bookings\",children:[/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",style:{width:'60px',height:'60px',color:'#ccc',marginBottom:'20px'},children:/*#__PURE__*/_jsx(\"path\",{d:\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"No bookings found.\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#999',fontSize:'14px'},children:\"Bookings will appear here once customers make reservations.\"})]}):bookings.map(booking=>{var _booking$user,_booking$user2,_booking$car,_booking$car2;if(!booking.car){return null;}const customerName=booking.customerName||((_booking$user=booking.user)===null||_booking$user===void 0?void 0:_booking$user.name)||'Guest';const customerEmail=booking.customerEmail||((_booking$user2=booking.user)===null||_booking$user2===void 0?void 0:_booking$user2.email)||'N/A';return/*#__PURE__*/_jsxs(\"div\",{className:\"booking-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:((_booking$car=booking.car)===null||_booking$car===void 0?void 0:_booking$car.name)||'Unknown Car'}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Customer: \",customerName,\" (\",customerEmail,\")\"]}),booking.contactNumber&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Contact: \",booking.contactNumber]}),/*#__PURE__*/_jsxs(\"p\",{children:[new Date(booking.startDate).toLocaleDateString(),\" -\",' ',new Date(booking.endDate).toLocaleDateString()]}),booking.pickupLocation&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",booking.pickupLocation]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total: \",booking.totalPrice,\" \",((_booking$car2=booking.car)===null||_booking$car2===void 0?void 0:_booking$car2.currency)||'AED']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking-actions\",children:[getStatusBadge(booking.status),/*#__PURE__*/_jsxs(\"select\",{value:booking.status,onChange:e=>handleUpdateBookingStatus(booking._id,e.target.value),className:\"status-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"confirmed\",children:\"Approved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"})]}),booking.status!=='cancelled'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancelBooking(booking._id),className:\"btn-cancel-booking\",children:\"Cancel Booking\"})]})]},booking._id);})})]}),activeTab==='cars'&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-section\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowCarForm(true);setEditingCar(null);setCarFormData({name:'',brand:'',model:'',year:new Date().getFullYear(),pricePerDay:'',price30min:'',price60min:'',currency:'AED',seats:'',transmission:'Automatic',fuelType:'Petrol',image:'',description:'',available:true});},className:\"btn-add-car\",children:[/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 5V19M5 12H19\"})}),\"Add New Car\"]}),showCarForm&&/*#__PURE__*/_jsx(\"div\",{className:\"car-form-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"car-form-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:editingCar?'Edit Car':'Add New Car'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCarSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:carFormData.name,onChange:handleCarFormChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Brand *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"brand\",value:carFormData.brand,onChange:handleCarFormChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Model *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"model\",value:carFormData.model,onChange:handleCarFormChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Year *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"year\",value:carFormData.year,onChange:handleCarFormChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Price per Day (\",carFormData.currency||'AED',\") *\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"pricePerDay\",value:carFormData.pricePerDay,onChange:handleCarFormChange,required:true,min:\"0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Price 60min (\",carFormData.currency||'AED',\")\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price60min\",value:carFormData.price60min,onChange:handleCarFormChange,min:\"0\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Price 30min (\",carFormData.currency||'AED',\")\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price30min\",value:carFormData.price30min,onChange:handleCarFormChange,min:\"0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Currency\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"currency\",value:carFormData.currency,onChange:handleCarFormChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"AED\",children:\"AED\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",children:\"USD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",children:\"EUR\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Seats *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"seats\",value:carFormData.seats,onChange:handleCarFormChange,required:true,min:\"1\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Transmission *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"transmission\",value:carFormData.transmission,onChange:handleCarFormChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Manual\",children:\"Manual\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Automatic\",children:\"Automatic\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fuel Type *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"fuelType\",value:carFormData.fuelType,onChange:handleCarFormChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Petrol\",children:\"Petrol\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Diesel\",children:\"Diesel\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Electric\",children:\"Electric\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hybrid\",children:\"Hybrid\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Vehicle Image *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleCarFormChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"imageUrl\",placeholder:\"OR paste image URL\",value:carFormData.imageUrl,onChange:e=>{setCarFormData(prev=>_objectSpread(_objectSpread({},prev),{},{imageUrl:e.target.value,imageFile:null}));setImagePreview(e.target.value);},style:{marginTop:'10px'}}),imagePreview&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px'},children:[/*#__PURE__*/_jsx(\"img\",{src:imagePreview,alt:\"preview\",style:{width:'100%',height:'150px',objectFit:'cover'}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCarFormData(prev=>_objectSpread(_objectSpread({},prev),{},{imageFile:null,imageUrl:''}));setImagePreview(null);},children:\"Remove\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:carFormData.description,onChange:handleCarFormChange,rows:\"3\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"available\",checked:carFormData.available,onChange:handleCarFormChange}),\"Available\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:editingCar?'Update Car':'Add Car'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowCarForm(false);setEditingCar(null);},className:\"btn btn-secondary\",children:\"Cancel\"})]})]})]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading cars...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"cars-grid\",children:cars.map(car=>/*#__PURE__*/_jsxs(\"div\",{className:\"car-admin-card \".concat(!car.available?'car-unavailable':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"car-image-wrapper-admin\",children:[/*#__PURE__*/_jsx(\"img\",{src:car.image,alt:car.name}),car.available?/*#__PURE__*/_jsx(\"span\",{className:\"availability-badge-admin available\",children:\"\\u2713 Available\"}):/*#__PURE__*/_jsx(\"span\",{className:\"availability-badge-admin unavailable\",children:\"\\u2717 Not Available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"car-admin-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:car.name}),/*#__PURE__*/_jsxs(\"p\",{children:[car.brand,\" \",car.model,\" (\",car.year,\")\"]}),/*#__PURE__*/_jsx(\"p\",{children:car.price60min?\"\".concat(car.price60min,\" \").concat(car.currency||'AED',\"/60min\"):\"\".concat(car.pricePerDay,\" \").concat(car.currency||'AED',\"/day\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"car-admin-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleToggleAvailability(car._id,car.available),className:\"btn \".concat(car.available?'btn-warning':'btn-success'),title:car.available?'Mark as Not Available':'Mark as Available',children:car.available?'âœ— Mark Unavailable':'âœ“ Mark Available'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditCar(car),className:\"btn btn-secondary\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteCar(car._id),className:\"btn btn-danger\",children:\"Delete\"})]})]})]},car._id))})]})]})});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","axios","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","logout","navigate","activeTab","setActiveTab","bookings","setBookings","cars","setCars","loading","setLoading","showCarForm","setShowCarForm","editingCar","setEditingCar","newBookingsCount","setNewBookingsCount","lastBookingId","setLastBookingId","notifications","setNotifications","handleLogout","carFormData","setCarFormData","name","brand","model","year","Date","getFullYear","pricePerDay","price30min","price60min","currency","seats","transmission","fuelType","imageFile","imageUrl","description","available","imagePreview","setImagePreview","fetchBookings","fetchCars","checkNewBookings","interval","setInterval","clearInterval","response","get","latestBookings","data","length","latestBooking","pendingBookings","filter","b","status","_id","_latestBooking$car","_latestBooking$user","newNotification","id","now","message","concat","car","customerName","user","bookingId","timestamp","prev","exists","some","n","window","Notification","permission","body","icon","slice","error","console","requestPermission","pendingCount","handleCarFormChange","e","value","type","checked","files","target","file","_objectSpread","URL","createObjectURL","handleCarSubmit","preventDefault","formData","FormData","Object","entries","forEach","_ref","key","append","post","headers","alert","err","handleEditCar","image","handleDeleteCar","carId","confirm","delete","_error$response","_error$response$data","handleToggleAvailability","currentStatus","put","_error$response2","_error$response2$data","handleUpdateBookingStatus","_error$response3","_error$response3$data","handleCancelBooking","_error$response4","_error$response4$data","activeBookings","bookedCarIds","Set","map","_b$car","_b$car$_id","toString","Boolean","stats","totalCars","availableCars","includes","bookedCars","totalBookings","confirmedBookings","cancelledBookings","totalRevenue","reduce","sum","totalPrice","getStatusBadge","statusMap","pending","class","text","confirmed","cancelled","statusInfo","className","children","onClick","viewBox","fill","stroke","strokeWidth","d","xmlns","strokeLinecap","strokeLinejoin","notif","toLocaleTimeString","toLocaleString","style","height","Math","max","floor","total","pendingPercent","confirmedPercent","cancelledPercent","currentPercent","radius","centerX","centerY","createArc","percent","color","startAngle","endAngle","startAngleRad","PI","endAngleRad","x1","cos","y1","sin","x2","y2","largeArcFlag","cx","cy","r","x","y","textAnchor","fontSize","fontWeight","background","width","marginBottom","booking","_booking$user","_booking$user2","_booking$car","_booking$car2","customerEmail","email","contactNumber","startDate","toLocaleDateString","endDate","pickupLocation","onChange","onSubmit","required","min","accept","placeholder","marginTop","src","alt","objectFit","rows","title"],"sources":["/Users/EAPPLE/Desktop/dejavuadventure/client/src/pages/AdminDashboard.js"],"sourcesContent":["// import React, { useState, useEffect, useContext } from 'react';\n// import { useNavigate } from 'react-router-dom';\n// import axios from 'axios';\n// import { AuthContext } from '../context/AuthContext';\n// import './AdminDashboard.css';\n\n// const AdminDashboard = () => {\n//   const { logout } = useContext(AuthContext);\n//   const navigate = useNavigate();\n//   const [activeTab, setActiveTab] = useState('overview');\n//   const [bookings, setBookings] = useState([]);\n//   const [cars, setCars] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [showCarForm, setShowCarForm] = useState(false);\n//   const [editingCar, setEditingCar] = useState(null);\n//   const [newBookingsCount, setNewBookingsCount] = useState(0);\n//   const [lastBookingId, setLastBookingId] = useState(null);\n//   const [notifications, setNotifications] = useState([]);\n\n//   const handleLogout = () => {\n//     logout();\n//     navigate('/');\n//   };\n\n//   const [carFormData, setCarFormData] = useState({\n//     name: '',\n//     brand: '',\n//     model: '',\n//     year: new Date().getFullYear(),\n//     pricePerDay: '',\n//     price30min: '',\n//     price60min: '',\n//     currency: 'AED',\n//     seats: '',\n//     transmission: 'Automatic',\n//     fuelType: 'Petrol',\n//     imageFile: null,   // âœ… FILE\n//     imageUrl: '',      // âœ… URL\n//     description: '',\n//     available: true\n//   });\n  \n//   const [imagePreview, setImagePreview] = useState(null);\n  \n\n//   useEffect(() => {\n//     fetchBookings();\n//     fetchCars();\n//   }, []);\n\n//   useEffect(() => {\n//     if (activeTab === 'bookings') {\n//       fetchBookings();\n//     } else if (activeTab === 'cars') {\n//       fetchCars();\n//     }\n//   }, [activeTab]);\n\n//   // Poll for new bookings every 5 seconds for real-time notifications\n//   useEffect(() => {\n//     // Initial check\n//     checkNewBookings();\n    \n//     const interval = setInterval(() => {\n//       checkNewBookings();\n//     }, 5000); // Check every 5 seconds for faster notifications\n\n//     return () => clearInterval(interval);\n//   }, [lastBookingId]);\n\n//   const checkNewBookings = async () => {\n//     try {\n//       const response = await axios.get('/api/admin/bookings');\n//       const latestBookings = response.data;\n      \n//       if (latestBookings.length > 0) {\n//         const latestBooking = latestBookings[0];\n        \n//         // Count all pending bookings\n//         const pendingBookings = latestBookings.filter(b => b.status === 'pending');\n//         setNewBookingsCount(pendingBookings.length);\n        \n//         // Check if this is a new booking\n//         if (!lastBookingId || latestBooking._id !== lastBookingId) {\n//           // Add notification for new booking (any status)\n//           const newNotification = {\n//             id: Date.now(),\n//             message: `ðŸ”” New booking: ${latestBooking.car?.name || 'Unknown'} - ${latestBooking.customerName || latestBooking.user?.name || 'Guest'}`,\n//             bookingId: latestBooking._id,\n//             status: latestBooking.status,\n//             timestamp: new Date()\n//           };\n          \n//           setNotifications(prev => {\n//             // Check if notification already exists\n//             const exists = prev.some(n => n.bookingId === latestBooking._id);\n//             if (!exists) {\n//               // Show browser notification if permission granted\n//               if ('Notification' in window && Notification.permission === 'granted') {\n//                 new Notification('New Booking Received!', {\n//                   body: newNotification.message,\n//                   icon: '/favicon.ico'\n//                 });\n//               }\n//               return [newNotification, ...prev.slice(0, 9)]; // Keep last 10\n//             }\n//             return prev;\n//           });\n          \n//           // Update last booking ID\n//           setLastBookingId(latestBooking._id);\n          \n//           // Refresh bookings if on bookings tab\n//           if (activeTab === 'bookings') {\n//             fetchBookings();\n//           }\n//         }\n//       }\n//     } catch (error) {\n//       console.error('Error checking new bookings:', error);\n//     }\n//   };\n  \n//   // Request browser notification permission on mount\n//   useEffect(() => {\n//     if ('Notification' in window && Notification.permission === 'default') {\n//       Notification.requestPermission();\n//     }\n//   }, []);\n\n//   const fetchBookings = async () => {\n//     try {\n//       setLoading(true);\n//       const response = await axios.get('/api/admin/bookings');\n//       setBookings(response.data);\n      \n//       // Update last booking ID and reset count when manually fetching\n//       if (response.data.length > 0) {\n//         const latestBooking = response.data[0];\n//         const pendingCount = response.data.filter(b => b.status === 'pending').length;\n//         setNewBookingsCount(pendingCount);\n        \n//         // Set last booking ID only if not set\n//         if (!lastBookingId) {\n//           setLastBookingId(latestBooking._id);\n//         }\n//       }\n//     } catch (error) {\n//       console.error('Error fetching bookings:', error);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCars = async () => {\n//     try {\n//       setLoading(true);\n//       const response = await axios.get('/api/cars');\n//       setCars(response.data);\n//     } catch (error) {\n//       console.error('Error fetching cars:', error);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleCarFormChange = (e) => {\n//     const { name, value, type, checked, files } = e.target;\n  \n//     if (type === 'file') {\n//       const file = files[0];\n//       if (!file) return;\n  \n//       setCarFormData(prev => ({\n//         ...prev,\n//         imageFile: file,\n//         imageUrl: ''\n//       }));\n  \n//       setImagePreview(URL.createObjectURL(file));\n//     } else {\n//       setCarFormData(prev => ({\n//         ...prev,\n//         [name]: type === 'checkbox' ? checked : value\n//       }));\n//     }\n//   };\n  \n  \n  \n\n//   const handleCarSubmit = async (e) => {\n//     e.preventDefault();\n  \n//     try {\n//       const formData = new FormData();\n  \n//       Object.entries(carFormData).forEach(([key, value]) => {\n//         if (value !== null && value !== '') {\n//           formData.append(key, value);\n//         }\n//       });\n  \n//       await axios.post('/api/admin/cars', formData, {\n//         headers: { 'Content-Type': 'multipart/form-data' }\n//       });\n  \n//       alert('Car added successfully!');\n//       fetchCars();\n//       setShowCarForm(false);\n//     } catch (err) {\n//       alert('Image upload failed');\n//     }\n//   };\n  \n  \n  \n\n//   const handleEditCar = (car) => {\n//     setEditingCar(car);\n//     setCarFormData({\n//       name: car.name,\n//       brand: car.brand,\n//       model: car.model,\n//       year: car.year,\n//       pricePerDay: car.pricePerDay,\n//       price30min: car.price30min || '',\n//       price60min: car.price60min || '',\n//       currency: car.currency || 'AED',\n//       seats: car.seats,\n//       transmission: car.transmission,\n//       fuelType: car.fuelType,\n//       image: car.image,\n//       description: car.description || '',\n//       available: car.available\n//     });\n//     setShowCarForm(true);\n//   };\n\n//   const handleDeleteCar = async (carId) => {\n//     if (!window.confirm('Are you sure you want to delete this car?')) {\n//       return;\n//     }\n//     try {\n//       await axios.delete(`/api/admin/cars/${carId}`);\n//       fetchCars();\n//     } catch (error) {\n//       alert(error.response?.data?.message || 'Failed to delete car');\n//     }\n//   };\n\n//   const handleToggleAvailability = async (carId, currentStatus) => {\n//     try {\n//       await axios.put(`/api/admin/cars/${carId}`, {\n//         available: !currentStatus\n//       });\n//       fetchCars();\n//     } catch (error) {\n//       alert(error.response?.data?.message || 'Failed to update availability');\n//     }\n//   };\n\n//   const handleUpdateBookingStatus = async (bookingId, status) => {\n//     try {\n//       await axios.put(`/api/admin/bookings/${bookingId}/status`, { status });\n//       fetchBookings();\n//     } catch (error) {\n//       alert(error.response?.data?.message || 'Failed to update status');\n//     }\n//   };\n\n//   const handleCancelBooking = async (bookingId) => {\n//     if (!window.confirm('Are you sure you want to cancel this booking?')) {\n//       return;\n//     }\n//     try {\n//       await axios.put(`/api/bookings/${bookingId}/cancel`);\n//       fetchBookings();\n//     } catch (error) {\n//       alert(error.response?.data?.message || 'Failed to cancel booking');\n//     }\n//   };\n\n//   // Calculate stats\n//   const activeBookings = bookings.filter(b => \n//     b.status === 'pending' || b.status === 'confirmed'\n//   );\n//   const bookedCarIds = [...new Set(activeBookings.map(b => b.car?._id?.toString()).filter(Boolean))];\n  \n//   const stats = {\n//     totalCars: cars.length,\n//     availableCars: cars.filter(car => !bookedCarIds.includes(car._id.toString())).length,\n//     bookedCars: bookedCarIds.length,\n//     totalBookings: bookings.length,\n//     pendingBookings: bookings.filter(b => b.status === 'pending').length,\n//     confirmedBookings: bookings.filter(b => b.status === 'confirmed').length,\n//     cancelledBookings: bookings.filter(b => b.status === 'cancelled').length,\n//     totalRevenue: bookings\n//       .filter(b => b.status === 'confirmed')\n//       .reduce((sum, b) => sum + (b.totalPrice || 0), 0)\n//   };\n\n//   const getStatusBadge = (status) => {\n//     const statusMap = {\n//       pending: { class: 'status-pending', text: 'Pending' },\n//       confirmed: { class: 'status-confirmed', text: 'Approved' },\n//       cancelled: { class: 'status-cancelled', text: 'Cancelled' }\n//     };\n//     const statusInfo = statusMap[status] || statusMap.pending;\n//     return <span className={`status-badge ${statusInfo.class}`}>{statusInfo.text}</span>;\n//   };\n\n//   return (\n//     <div className=\"admin-dashboard\">\n//       <div className=\"container\">\n//         <div className=\"admin-header\">\n//           <div className=\"admin-header-left\">\n//             <h1>Admin Dashboard</h1>\n//             {newBookingsCount > 0 && (\n//               <div className=\"notification-badge\" onClick={() => setActiveTab('bookings')}>\n//                 <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                   <path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"/>\n//                   <path d=\"M13.73 21a2 2 0 0 1-3.46 0\"/>\n//                 </svg>\n//                 <span className=\"notification-count\">{newBookingsCount}</span>\n//                 <span className=\"notification-text\">New Booking{newBookingsCount > 1 ? 's' : ''}</span>\n//               </div>\n//             )}\n//           </div>\n//           <button onClick={handleLogout} className=\"btn-logout-admin\">\n//             <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n//               <path d=\"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9M16 17L21 12M21 12L16 7M21 12H9\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n//             </svg>\n//             Logout\n//           </button>\n//         </div>\n        \n//         {/* Notifications List */}\n//         {notifications.length > 0 && (\n//           <div className=\"notifications-panel\">\n//             <div className=\"notifications-header\">\n//               <h3>ðŸ“¬ Recent Notifications</h3>\n//               <button onClick={() => { setNotifications([]); setNewBookingsCount(0); }} className=\"btn-clear-notifications\">\n//                 Clear All\n//               </button>\n//             </div>\n//             <div className=\"notifications-list\">\n//               {notifications.map((notif) => (\n//                 <div key={notif.id} className=\"notification-item\" onClick={() => { setActiveTab('bookings'); setNewBookingsCount(0); }}>\n//                   <div className=\"notification-icon\">ðŸ””</div>\n//                   <div className=\"notification-content\">\n//                     <p className=\"notification-message\">{notif.message}</p>\n//                     <span className=\"notification-time\">\n//                       {new Date(notif.timestamp).toLocaleTimeString()}\n//                     </span>\n//                   </div>\n//                 </div>\n//               ))}\n//             </div>\n//           </div>\n//         )}\n//         <div className=\"admin-tabs\">\n//           <button\n//             className={activeTab === 'overview' ? 'active' : ''}\n//             onClick={() => setActiveTab('overview')}\n//           >\n//             Overview\n//           </button>\n//           <button\n//             className={activeTab === 'bookings' ? 'active' : ''}\n//             onClick={() => setActiveTab('bookings')}\n//           >\n//             Bookings\n//           </button>\n//           <button\n//             className={activeTab === 'cars' ? 'active' : ''}\n//             onClick={() => setActiveTab('cars')}\n//           >\n//             Cars\n//           </button>\n//         </div>\n\n//         {activeTab === 'overview' && (\n//           <div className=\"admin-overview\">\n//             <div className=\"stats-grid\">\n//               <div className=\"stat-card stat-primary\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M9 17V7M9 7L5 11M9 7L13 11M15 7V17M15 17L19 13M15 17L11 13\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.totalCars}</h3>\n//                   <p>Total Vehicles</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-success\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.availableCars}</h3>\n//                   <p>Available Cars</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-warning\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.bookedCars}</h3>\n//                   <p>Booked Cars</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-info\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.totalBookings}</h3>\n//                   <p>Total Bookings</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-pending\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M12 8V12L15 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.pendingBookings}</h3>\n//                   <p>Pending</p>\n//                 </div>\n//               </div>\n//               <div className=\"stat-card stat-revenue\">\n//                 <div className=\"stat-icon\">\n//                   <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                     <path d=\"M12 2V22M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6312 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6312 13.6815 18 14.5717 18 15.5C18 16.4283 17.6312 17.3185 16.9749 17.9749C16.3185 18.6312 15.4283 19 14.5 19H6\"/>\n//                   </svg>\n//                 </div>\n//                 <div className=\"stat-content\">\n//                   <h3>{stats.totalRevenue.toLocaleString()} AED</h3>\n//                   <p>Total Revenue</p>\n//                 </div>\n//               </div>\n//             </div>\n\n//             <div className=\"charts-section\">\n//               {/* Vehicle Status - Bar Chart */}\n//               <div className=\"chart-card\">\n//                 <h3>ðŸš— Vehicle Status - Bar Chart</h3>\n//                 <div className=\"bar-chart-container\">\n//                   <div className=\"bar-chart\">\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-total-vehicles\" \n//                           style={{ height: `${Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1) > 0 ? (stats.totalCars / Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{stats.totalCars}</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Total Vehicles</div>\n//                     </div>\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-pending\" \n//                           style={{ height: `${Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1) > 0 ? (stats.pendingBookings / Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{stats.pendingBookings}</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Pending</div>\n//                     </div>\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-revenue\" \n//                           style={{ height: `${Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1) > 0 ? (Math.floor(stats.totalRevenue / 1000) / Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{Math.floor(stats.totalRevenue / 1000)}K</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Total Revenue (AED)</div>\n//                     </div>\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-available\" \n//                           style={{ height: `${stats.totalCars > 0 ? (stats.availableCars / Math.max(stats.availableCars, stats.bookedCars, 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{stats.availableCars}</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Available</div>\n//                     </div>\n//                     <div className=\"bar-item\">\n//                       <div className=\"bar-column-wrapper\">\n//                         <div \n//                           className=\"bar-column bar-booked\" \n//                           style={{ height: `${stats.totalCars > 0 ? (stats.bookedCars / Math.max(stats.availableCars, stats.bookedCars, 1)) * 100 : 0}%` }}\n//                         >\n//                           <span className=\"bar-count\">{stats.bookedCars}</span>\n//                         </div>\n//                       </div>\n//                       <div className=\"bar-label\">Booked</div>\n//                     </div>\n//                   </div>\n//                 </div>\n//               </div>\n\n//               {/* Booking Status - Pie Chart */}\n//               <div className=\"chart-card\">\n//                 <h3>ðŸ“Š Booking Status - Pie Chart</h3>\n//                 <div className=\"pie-chart-container\">\n//                   <div className=\"pie-chart-wrapper\">\n//                     <svg className=\"pie-chart\" viewBox=\"0 0 200 200\">\n//                       {(() => {\n//                         const total = stats.totalBookings || 1;\n//                         const pendingPercent = (stats.pendingBookings / total) * 100;\n//                         const confirmedPercent = (stats.confirmedBookings / total) * 100;\n//                         const cancelledPercent = (stats.cancelledBookings / total) * 100;\n                        \n//                         let currentPercent = 0;\n//                         const radius = 80;\n//                         const centerX = 100;\n//                         const centerY = 100;\n                        \n//                         const createArc = (percent, color) => {\n//                           if (percent === 0) return null;\n//                           const startAngle = (currentPercent / 100) * 360 - 90;\n//                           const endAngle = ((currentPercent + percent) / 100) * 360 - 90;\n//                           currentPercent += percent;\n                          \n//                           const startAngleRad = (startAngle * Math.PI) / 180;\n//                           const endAngleRad = (endAngle * Math.PI) / 180;\n                          \n//                           const x1 = centerX + radius * Math.cos(startAngleRad);\n//                           const y1 = centerY + radius * Math.sin(startAngleRad);\n//                           const x2 = centerX + radius * Math.cos(endAngleRad);\n//                           const y2 = centerY + radius * Math.sin(endAngleRad);\n                          \n//                           const largeArcFlag = percent > 50 ? 1 : 0;\n                          \n//                           return (\n//                             <path\n//                               d={`M ${centerX} ${centerY} L ${x1} ${y1} A ${radius} ${radius} 0 ${largeArcFlag} 1 ${x2} ${y2} Z`}\n//                               fill={color}\n//                               stroke=\"#fff\"\n//                               strokeWidth=\"3\"\n//                             />\n//                           );\n//                         };\n                        \n//                         return (\n//                           <>\n//                             {createArc(pendingPercent, '#FF6B6B')}\n//                             {createArc(confirmedPercent, '#51CF66')}\n//                             {createArc(cancelledPercent, '#FF8787')}\n//                           </>\n//                         );\n//                       })()}\n//                       <circle cx=\"100\" cy=\"100\" r=\"60\" fill=\"white\" />\n//                       <text x=\"100\" y=\"95\" textAnchor=\"middle\" fontSize=\"24\" fontWeight=\"800\" fill=\"#1e3c72\">\n//                         {stats.totalBookings}\n//                       </text>\n//                       <text x=\"100\" y=\"115\" textAnchor=\"middle\" fontSize=\"14\" fill=\"#666\" fontWeight=\"600\">\n//                         Total Bookings\n//                       </text>\n//                     </svg>\n//                   </div>\n//                   <div className=\"pie-legend\">\n//                     <div className=\"legend-item\">\n//                       <span className=\"legend-color\" style={{background: 'linear-gradient(135deg, #FF6B6B 0%, #FF8787 100%)'}}></span>\n//                       <span className=\"legend-label\">Pending ({stats.pendingBookings})</span>\n//                     </div>\n//                     <div className=\"legend-item\">\n//                       <span className=\"legend-color\" style={{background: 'linear-gradient(135deg, #51CF66 0%, #69DB7C 100%)'}}></span>\n//                       <span className=\"legend-label\">Approved ({stats.confirmedBookings})</span>\n//                     </div>\n//                     <div className=\"legend-item\">\n//                       <span className=\"legend-color\" style={{background: 'linear-gradient(135deg, #FF8787 0%, #FF6B6B 100%)'}}></span>\n//                       <span className=\"legend-label\">Cancelled ({stats.cancelledBookings})</span>\n//                     </div>\n//                   </div>\n//                 </div>\n//               </div>\n//             </div>\n//           </div>\n//         )}\n\n//         {activeTab === 'bookings' && (\n//           <div className=\"admin-section\">\n//             <div className=\"section-header-bookings\">\n//               <h2>All Bookings ({bookings.length})</h2>\n//               <p>Manage and track all vehicle bookings</p>\n//             </div>\n//             {loading ? (\n//               <div className=\"loading\">Loading bookings...</div>\n//             ) : (\n//               <div className=\"bookings-table\">\n//                 {bookings.length === 0 ? (\n//                   <div className=\"no-bookings\">\n//                     <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{width: '60px', height: '60px', color: '#ccc', marginBottom: '20px'}}>\n//                       <path d=\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01\"/>\n//                     </svg>\n//                     <p>No bookings found.</p>\n//                     <p style={{color: '#999', fontSize: '14px'}}>Bookings will appear here once customers make reservations.</p>\n//                   </div>\n//                 ) : (\n//                   bookings.map((booking) => {\n//                     if (!booking.car) {\n//                       return null;\n//                     }\n//                     const customerName = booking.customerName || booking.user?.name || 'Guest';\n//                     const customerEmail = booking.customerEmail || booking.user?.email || 'N/A';\n//                     return (\n//                       <div key={booking._id} className=\"booking-row\">\n//                         <div className=\"booking-info\">\n//                           <h4>{booking.car?.name || 'Unknown Car'}</h4>\n//                           <p>Customer: {customerName} ({customerEmail})</p>\n//                           {booking.contactNumber && <p>Contact: {booking.contactNumber}</p>}\n//                           <p>\n//                             {new Date(booking.startDate).toLocaleDateString()} -{' '}\n//                             {new Date(booking.endDate).toLocaleDateString()}\n//                           </p>\n//                           {booking.pickupLocation && <p>Location: {booking.pickupLocation}</p>}\n//                           <p>Total: {booking.totalPrice} {booking.car?.currency || 'AED'}</p>\n//                         </div>\n//                         <div className=\"booking-actions\">\n//                           {getStatusBadge(booking.status)}\n//                           <select\n//                             value={booking.status}\n//                             onChange={(e) => handleUpdateBookingStatus(booking._id, e.target.value)}\n//                             className=\"status-select\"\n//                           >\n//                             <option value=\"pending\">Pending</option>\n//                             <option value=\"confirmed\">Approved</option>\n//                             <option value=\"cancelled\">Cancelled</option>\n//                           </select>\n//                           {booking.status !== 'cancelled' && (\n//                             <button\n//                               onClick={() => handleCancelBooking(booking._id)}\n//                               className=\"btn-cancel-booking\"\n//                             >\n//                               Cancel Booking\n//                             </button>\n//                           )}\n//                         </div>\n//                       </div>\n//                     );\n//                   })\n//                 )}\n//               </div>\n//             )}\n//           </div>\n//         )}\n\n//         {activeTab === 'cars' && (\n//           <div className=\"admin-section\">\n//             <button\n//               onClick={() => {\n//                 setShowCarForm(true);\n//                 setEditingCar(null);\n//                 setCarFormData({\n//                   name: '',\n//                   brand: '',\n//                   model: '',\n//                   year: new Date().getFullYear(),\n//                   pricePerDay: '',\n//                   price30min: '',\n//                   price60min: '',\n//                   currency: 'AED',\n//                   seats: '',\n//                   transmission: 'Automatic',\n//                   fuelType: 'Petrol',\n//                   image: '',\n//                   description: '',\n//                   available: true\n//                 });\n//               }}\n//               className=\"btn-add-car\"\n//             >\n//               <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n//                 <path d=\"M12 5V19M5 12H19\"/>\n//               </svg>\n//               Add New Car\n//             </button>\n\n//             {showCarForm && (\n//               <div className=\"car-form-modal\">\n//                 <div className=\"car-form-content\">\n//                   <h3>{editingCar ? 'Edit Car' : 'Add New Car'}</h3>\n//                   <form onSubmit={handleCarSubmit}>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Name *</label>\n//                         <input\n//                           type=\"text\"\n//                           name=\"name\"\n//                           value={carFormData.name}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         />\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Brand *</label>\n//                         <input\n//                           type=\"text\"\n//                           name=\"brand\"\n//                           value={carFormData.brand}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         />\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Model *</label>\n//                         <input\n//                           type=\"text\"\n//                           name=\"model\"\n//                           value={carFormData.model}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         />\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Year *</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"year\"\n//                           value={carFormData.year}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         />\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Price per Day ({carFormData.currency || 'AED'}) *</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"pricePerDay\"\n//                           value={carFormData.pricePerDay}\n//                           onChange={handleCarFormChange}\n//                           required\n//                           min=\"0\"\n//                         />\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Price 60min ({carFormData.currency || 'AED'})</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"price60min\"\n//                           value={carFormData.price60min}\n//                           onChange={handleCarFormChange}\n//                           min=\"0\"\n//                         />\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Price 30min ({carFormData.currency || 'AED'})</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"price30min\"\n//                           value={carFormData.price30min}\n//                           onChange={handleCarFormChange}\n//                           min=\"0\"\n//                         />\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Currency</label>\n//                         <select\n//                           name=\"currency\"\n//                           value={carFormData.currency}\n//                           onChange={handleCarFormChange}\n//                         >\n//                           <option value=\"AED\">AED</option>\n//                           <option value=\"USD\">USD</option>\n//                           <option value=\"EUR\">EUR</option>\n//                         </select>\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Seats *</label>\n//                         <input\n//                           type=\"number\"\n//                           name=\"seats\"\n//                           value={carFormData.seats}\n//                           onChange={handleCarFormChange}\n//                           required\n//                           min=\"1\"\n//                         />\n//                       </div>\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <label>Transmission *</label>\n//                         <select\n//                           name=\"transmission\"\n//                           value={carFormData.transmission}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         >\n//                           <option value=\"Manual\">Manual</option>\n//                           <option value=\"Automatic\">Automatic</option>\n//                         </select>\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <label>Fuel Type *</label>\n//                         <select\n//                           name=\"fuelType\"\n//                           value={carFormData.fuelType}\n//                           onChange={handleCarFormChange}\n//                           required\n//                         >\n//                           <option value=\"Petrol\">Petrol</option>\n//                           <option value=\"Diesel\">Diesel</option>\n//                           <option value=\"Electric\">Electric</option>\n//                           <option value=\"Hybrid\">Hybrid</option>\n//                         </select>\n//                       </div>\n//                     </div>\n//                     <div className=\"form-group\">\n//   <label>Vehicle Image *</label>\n\n//   <input\n//     type=\"file\"\n//     accept=\"image/*\"\n//     onChange={handleCarFormChange}\n//   />\n\n//   <input\n//     type=\"text\"\n//     name=\"imageUrl\"\n//     placeholder=\"OR paste image URL\"\n//     value={carFormData.imageUrl}\n//     onChange={(e) => {\n//       setCarFormData(prev => ({\n//         ...prev,\n//         imageUrl: e.target.value,\n//         imageFile: null\n//       }));\n//       setImagePreview(e.target.value);\n//     }}\n//     style={{ marginTop: '10px' }}\n//   />\n\n//   {imagePreview && (\n//     <div style={{ marginTop: '10px' }}>\n//       <img\n//         src={imagePreview}\n//         alt=\"preview\"\n//         style={{ width: '100%', height: '150px', objectFit: 'cover' }}\n//       />\n//       <button\n//         type=\"button\"\n//         onClick={() => {\n//           setCarFormData(prev => ({\n//             ...prev,\n//             imageFile: null,\n//             imageUrl: ''\n//           }));\n//           setImagePreview(null);\n//         }}\n//       >\n//         Remove\n//       </button>\n//     </div>\n//   )}\n// </div>\n\n//                     <div className=\"form-group\">\n//                       <label>Description</label>\n//                       <textarea\n//                         name=\"description\"\n//                         value={carFormData.description}\n//                         onChange={handleCarFormChange}\n//                         rows=\"3\"\n//                       />\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>\n//                         <input\n//                           type=\"checkbox\"\n//                           name=\"available\"\n//                           checked={carFormData.available}\n//                           onChange={handleCarFormChange}\n//                         />\n//                         Available\n//                       </label>\n//                     </div>\n//                     <div className=\"form-actions\">\n//                       <button type=\"submit\" className=\"btn btn-primary\">\n//                         {editingCar ? 'Update Car' : 'Add Car'}\n//                       </button>\n//                       <button\n//                         type=\"button\"\n//                         onClick={() => {\n//                           setShowCarForm(false);\n//                           setEditingCar(null);\n//                         }}\n//                         className=\"btn btn-secondary\"\n//                       >\n//                         Cancel\n//                       </button>\n//                     </div>\n//                   </form>\n//                 </div>\n//               </div>\n//             )}\n\n//             {loading ? (\n//               <div className=\"loading\">Loading cars...</div>\n//             ) : (\n//               <div className=\"cars-grid\">\n//                 {cars.map((car) => (\n//                   <div key={car._id} className={`car-admin-card ${!car.available ? 'car-unavailable' : ''}`}>\n//                     <div className=\"car-image-wrapper-admin\">\n//                       <img src={car.image} alt={car.name} />\n//                       {car.available ? (\n//                         <span className=\"availability-badge-admin available\">âœ“ Available</span>\n//                       ) : (\n//                         <span className=\"availability-badge-admin unavailable\">âœ— Not Available</span>\n//                       )}\n//                     </div>\n//                     <div className=\"car-admin-info\">\n//                       <h4>{car.name}</h4>\n//                       <p>{car.brand} {car.model} ({car.year})</p>\n//                       <p>{car.price60min ? `${car.price60min} ${car.currency || 'AED'}/60min` : `${car.pricePerDay} ${car.currency || 'AED'}/day`}</p>\n//                       <div className=\"car-admin-actions\">\n//                         <button\n//                           onClick={() => handleToggleAvailability(car._id, car.available)}\n//                           className={`btn ${car.available ? 'btn-warning' : 'btn-success'}`}\n//                           title={car.available ? 'Mark as Not Available' : 'Mark as Available'}\n//                         >\n//                           {car.available ? 'âœ— Mark Unavailable' : 'âœ“ Mark Available'}\n//                         </button>\n//                         <button\n//                           onClick={() => handleEditCar(car)}\n//                           className=\"btn btn-secondary\"\n//                         >\n//                           Edit\n//                         </button>\n//                         <button\n//                           onClick={() => handleDeleteCar(car._id)}\n//                           className=\"btn btn-danger\"\n//                         >\n//                           Delete\n//                         </button>\n//                       </div>\n//                     </div>\n//                   </div>\n//                 ))}\n//               </div>\n//             )}\n//           </div>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default AdminDashboard;\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { AuthContext } from '../context/AuthContext';\nimport './AdminDashboard.css';\n\nconst AdminDashboard = () => {\n  const { logout } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState('overview');\n  const [bookings, setBookings] = useState([]);\n  const [cars, setCars] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showCarForm, setShowCarForm] = useState(false);\n  const [editingCar, setEditingCar] = useState(null);\n  const [newBookingsCount, setNewBookingsCount] = useState(0);\n  const [lastBookingId, setLastBookingId] = useState(null);\n  const [notifications, setNotifications] = useState([]);\n\n  const handleLogout = () => {\n    logout();\n    navigate('/');\n  };\n\n  const [carFormData, setCarFormData] = useState({\n    name: '',\n    brand: '',\n    model: '',\n    year: new Date().getFullYear(),\n    pricePerDay: '',\n    price30min: '',\n    price60min: '',\n    currency: 'AED',\n    seats: '',\n    transmission: 'Automatic',\n    fuelType: 'Petrol',\n    imageFile: null,\n    imageUrl: '',\n    description: '',\n    available: true\n  });\n  \n  const [imagePreview, setImagePreview] = useState(null);\n    \n  useEffect(() => {\n    fetchBookings();\n    fetchCars();\n  }, []);\n\n  useEffect(() => {\n    if (activeTab === 'bookings') {\n      fetchBookings();\n    } else if (activeTab === 'cars') {\n      fetchCars();\n    }\n  }, [activeTab]);\n\n  useEffect(() => {\n    checkNewBookings();\n        \n    const interval = setInterval(() => {\n      checkNewBookings();\n    }, 5000);\n    \n    return () => clearInterval(interval);\n  }, [lastBookingId]);\n\n  const checkNewBookings = async () => {\n    try {\n      const response = await axios.get('/api/admin/bookings');\n      const latestBookings = response.data;\n            \n      if (latestBookings.length > 0) {\n        const latestBooking = latestBookings[0];\n                \n        const pendingBookings = latestBookings.filter(b => b.status === 'pending');\n        setNewBookingsCount(pendingBookings.length);\n                \n        if (!lastBookingId || latestBooking._id !== lastBookingId) {\n          const newNotification = {\n            id: Date.now(),\n            message: `ðŸ”” New booking: ${latestBooking.car?.name || 'Unknown'} - ${latestBooking.customerName || latestBooking.user?.name || 'Guest'}`,\n            bookingId: latestBooking._id,\n            status: latestBooking.status,\n            timestamp: new Date()\n          };\n                  \n          setNotifications(prev => {\n            const exists = prev.some(n => n.bookingId === latestBooking._id);\n            if (!exists) {\n              if ('Notification' in window && Notification.permission === 'granted') {\n                new Notification('New Booking Received!', {\n                  body: newNotification.message,\n                  icon: '/favicon.ico'\n                });\n              }\n              return [newNotification, ...prev.slice(0, 9)];\n            }\n            return prev;\n          });\n                  \n          setLastBookingId(latestBooking._id);\n                  \n          if (activeTab === 'bookings') {\n            fetchBookings();\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error checking new bookings:', error);\n    }\n  };\n  \n  useEffect(() => {\n    if ('Notification' in window && Notification.permission === 'default') {\n      Notification.requestPermission();\n    }\n  }, []);\n\n  const fetchBookings = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/api/admin/bookings');\n      setBookings(response.data);\n            \n      if (response.data.length > 0) {\n        const latestBooking = response.data[0];\n        const pendingCount = response.data.filter(b => b.status === 'pending').length;\n        setNewBookingsCount(pendingCount);\n                \n        if (!lastBookingId) {\n          setLastBookingId(latestBooking._id);\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching bookings:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchCars = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/api/cars');\n      setCars(response.data);\n    } catch (error) {\n      console.error('Error fetching cars:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCarFormChange = (e) => {\n    const { name, value, type, checked, files } = e.target;\n    \n    if (type === 'file') {\n      const file = files[0];\n      if (!file) return;\n      \n      setCarFormData(prev => ({\n        ...prev,\n        imageFile: file,\n        imageUrl: ''\n      }));\n      \n      setImagePreview(URL.createObjectURL(file));\n    } else {\n      setCarFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? checked : value\n      }));\n    }\n  };\n          \n  const handleCarSubmit = async (e) => {\n    e.preventDefault();\n    \n    try {\n      const formData = new FormData();\n      \n      Object.entries(carFormData).forEach(([key, value]) => {\n        if (value !== null && value !== '') {\n          formData.append(key, value);\n        }\n      });\n      \n      await axios.post('/api/admin/cars', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n      \n      alert('Car added successfully!');\n      fetchCars();\n      setShowCarForm(false);\n    } catch (err) {\n      alert('Image upload failed');\n    }\n  };\n          \n  const handleEditCar = (car) => {\n    setEditingCar(car);\n    setCarFormData({\n      name: car.name,\n      brand: car.brand,\n      model: car.model,\n      year: car.year,\n      pricePerDay: car.pricePerDay,\n      price30min: car.price30min || '',\n      price60min: car.price60min || '',\n      currency: car.currency || 'AED',\n      seats: car.seats,\n      transmission: car.transmission,\n      fuelType: car.fuelType,\n      image: car.image,\n      description: car.description || '',\n      available: car.available\n    });\n    setShowCarForm(true);\n  };\n\n  const handleDeleteCar = async (carId) => {\n    if (!window.confirm('Are you sure you want to delete this car?')) {\n      return;\n    }\n    try {\n      await axios.delete(`/api/admin/cars/${carId}`);\n      fetchCars();\n    } catch (error) {\n      alert(error.response?.data?.message || 'Failed to delete car');\n    }\n  };\n\n  const handleToggleAvailability = async (carId, currentStatus) => {\n    try {\n      await axios.put(`/api/admin/cars/${carId}`, {\n        available: !currentStatus\n      });\n      fetchCars();\n    } catch (error) {\n      alert(error.response?.data?.message || 'Failed to update availability');\n    }\n  };\n\n  const handleUpdateBookingStatus = async (bookingId, status) => {\n    try {\n      await axios.put(`/api/admin/bookings/${bookingId}/status`, { status });\n      fetchBookings();\n    } catch (error) {\n      alert(error.response?.data?.message || 'Failed to update status');\n    }\n  };\n\n  const handleCancelBooking = async (bookingId) => {\n    if (!window.confirm('Are you sure you want to cancel this booking?')) {\n      return;\n    }\n    try {\n      await axios.put(`/api/bookings/${bookingId}/cancel`);\n      fetchBookings();\n    } catch (error) {\n      alert(error.response?.data?.message || 'Failed to cancel booking');\n    }\n  };\n\n  const activeBookings = bookings.filter(b => \n    b.status === 'pending' || b.status === 'confirmed'\n  );\n  const bookedCarIds = [...new Set(activeBookings.map(b => b.car?._id?.toString()).filter(Boolean))];\n  \n  const stats = {\n    totalCars: cars.length,\n    availableCars: cars.filter(car => !bookedCarIds.includes(car._id.toString())).length,\n    bookedCars: bookedCarIds.length,\n    totalBookings: bookings.length,\n    pendingBookings: bookings.filter(b => b.status === 'pending').length,\n    confirmedBookings: bookings.filter(b => b.status === 'confirmed').length,\n    cancelledBookings: bookings.filter(b => b.status === 'cancelled').length,\n    totalRevenue: bookings\n      .filter(b => b.status === 'confirmed')\n      .reduce((sum, b) => sum + (b.totalPrice || 0), 0)\n  };\n\n  const getStatusBadge = (status) => {\n    const statusMap = {\n      pending: { class: 'status-pending', text: 'Pending' },\n      confirmed: { class: 'status-confirmed', text: 'Approved' },\n      cancelled: { class: 'status-cancelled', text: 'Cancelled' }\n    };\n    const statusInfo = statusMap[status] || statusMap.pending;\n    return <span className={`status-badge ${statusInfo.class}`}>{statusInfo.text}</span>;\n  };\n\n  return (\n    <div className=\"admin-dashboard\">\n      <div className=\"container\">\n        <div className=\"admin-header\">\n          <div className=\"admin-header-left\">\n            <h1>Admin Dashboard</h1>\n            {newBookingsCount > 0 && (\n              <div className=\"notification-badge\" onClick={() => setActiveTab('bookings')}>\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"/>\n                  <path d=\"M13.73 21a2 2 0 0 1-3.46 0\"/>\n                </svg>\n                <span className=\"notification-count\">{newBookingsCount}</span>\n                <span className=\"notification-text\">New Booking{newBookingsCount > 1 ? 's' : ''}</span>\n              </div>\n            )}\n          </div>\n          <button onClick={handleLogout} className=\"btn-logout-admin\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9M16 17L21 12M21 12L16 7M21 12H9\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n            Logout\n          </button>\n        </div>\n                \n        {notifications.length > 0 && (\n          <div className=\"notifications-panel\">\n            <div className=\"notifications-header\">\n              <h3>ðŸ“¬ Recent Notifications</h3>\n              <button onClick={() => { setNotifications([]); setNewBookingsCount(0); }} className=\"btn-clear-notifications\">\n                Clear All\n              </button>\n            </div>\n            <div className=\"notifications-list\">\n              {notifications.map((notif) => (\n                <div key={notif.id} className=\"notification-item\" onClick={() => { setActiveTab('bookings'); setNewBookingsCount(0); }}>\n                  <div className=\"notification-icon\">ðŸ””</div>\n                  <div className=\"notification-content\">\n                    <p className=\"notification-message\">{notif.message}</p>\n                    <span className=\"notification-time\">\n                      {new Date(notif.timestamp).toLocaleTimeString()}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"admin-tabs\">\n          <button\n            className={activeTab === 'overview' ? 'active' : ''}\n            onClick={() => setActiveTab('overview')}\n          >\n            Overview\n          </button>\n          <button\n            className={activeTab === 'bookings' ? 'active' : ''}\n            onClick={() => setActiveTab('bookings')}\n          >\n            Bookings\n          </button>\n          <button\n            className={activeTab === 'cars' ? 'active' : ''}\n            onClick={() => setActiveTab('cars')}\n          >\n            Cars\n          </button>\n        </div>\n\n        {activeTab === 'overview' && (\n          <div className=\"admin-overview\">\n            <div className=\"stats-grid\">\n              <div className=\"stat-card stat-primary\">\n                <div className=\"stat-icon\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <path d=\"M9 17V7M9 7L5 11M9 7L13 11M15 7V17M15 17L19 13M15 17L11 13\"/>\n                  </svg>\n                </div>\n                <div className=\"stat-content\">\n                  <h3>{stats.totalCars}</h3>\n                  <p>Total Vehicles</p>\n                </div>\n              </div>\n              <div className=\"stat-card stat-success\">\n                <div className=\"stat-icon\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <path d=\"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z\"/>\n                  </svg>\n                </div>\n                <div className=\"stat-content\">\n                  <h3>{stats.availableCars}</h3>\n                  <p>Available Cars</p>\n                </div>\n              </div>\n              <div className=\"stat-card stat-warning\">\n                <div className=\"stat-icon\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <path d=\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5\"/>\n                  </svg>\n                </div>\n                <div className=\"stat-content\">\n                  <h3>{stats.bookedCars}</h3>\n                  <p>Booked Cars</p>\n                </div>\n              </div>\n              <div className=\"stat-card stat-info\">\n                <div className=\"stat-icon\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <path d=\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01\"/>\n                  </svg>\n                </div>\n                <div className=\"stat-content\">\n                  <h3>{stats.totalBookings}</h3>\n                  <p>Total Bookings</p>\n                </div>\n              </div>\n              <div className=\"stat-card stat-pending\">\n                <div className=\"stat-icon\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <path d=\"M12 8V12L15 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z\"/>\n                  </svg>\n                </div>\n                <div className=\"stat-content\">\n                  <h3>{stats.pendingBookings}</h3>\n                  <p>Pending</p>\n                </div>\n              </div>\n              <div className=\"stat-card stat-revenue\">\n                <div className=\"stat-icon\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <path d=\"M12 2V22M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6312 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6312 13.6815 18 14.5717 18 15.5C18 16.4283 17.6312 17.3185 16.9749 17.9749C16.3185 18.6312 15.4283 19 14.5 19H6\"/>\n                  </svg>\n                </div>\n                <div className=\"stat-content\">\n                  <h3>{stats.totalRevenue.toLocaleString()} AED</h3>\n                  <p>Total Revenue</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"charts-section\">\n              <div className=\"chart-card\">\n                <h3>ðŸš— Vehicle Status - Bar Chart</h3>\n                <div className=\"bar-chart-container\">\n                  <div className=\"bar-chart\">\n                    <div className=\"bar-item\">\n                      <div className=\"bar-column-wrapper\">\n                        <div\n                          className=\"bar-column bar-total-vehicles\"\n                          style={{ height: `${Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1) > 0 ? (stats.totalCars / Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1)) * 100 : 0}%` }}\n                        >\n                          <span className=\"bar-count\">{stats.totalCars}</span>\n                        </div>\n                      </div>\n                      <div className=\"bar-label\">Total Vehicles</div>\n                    </div>\n                    <div className=\"bar-item\">\n                      <div className=\"bar-column-wrapper\">\n                        <div\n                          className=\"bar-column bar-pending\"\n                          style={{ height: `${Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1) > 0 ? (stats.pendingBookings / Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1)) * 100 : 0}%` }}\n                        >\n                          <span className=\"bar-count\">{stats.pendingBookings}</span>\n                        </div>\n                      </div>\n                      <div className=\"bar-label\">Pending</div>\n                    </div>\n                    <div className=\"bar-item\">\n                      <div className=\"bar-column-wrapper\">\n                        <div\n                          className=\"bar-column bar-revenue\"\n                          style={{ height: `${Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1) > 0 ? (Math.floor(stats.totalRevenue / 1000) / Math.max(stats.totalCars, stats.pendingBookings, Math.floor(stats.totalRevenue / 1000), 1)) * 100 : 0}%` }}\n                        >\n                          <span className=\"bar-count\">{Math.floor(stats.totalRevenue / 1000)}K</span>\n                        </div>\n                      </div>\n                      <div className=\"bar-label\">Total Revenue (AED)</div>\n                    </div>\n                    <div className=\"bar-item\">\n                      <div className=\"bar-column-wrapper\">\n                        <div\n                          className=\"bar-column bar-available\"\n                          style={{ height: `${stats.totalCars > 0 ? (stats.availableCars / Math.max(stats.availableCars, stats.bookedCars, 1)) * 100 : 0}%` }}\n                        >\n                          <span className=\"bar-count\">{stats.availableCars}</span>\n                        </div>\n                      </div>\n                      <div className=\"bar-label\">Available</div>\n                    </div>\n                    <div className=\"bar-item\">\n                      <div className=\"bar-column-wrapper\">\n                        <div\n                          className=\"bar-column bar-booked\"\n                          style={{ height: `${stats.totalCars > 0 ? (stats.bookedCars / Math.max(stats.availableCars, stats.bookedCars, 1)) * 100 : 0}%` }}\n                        >\n                          <span className=\"bar-count\">{stats.bookedCars}</span>\n                        </div>\n                      </div>\n                      <div className=\"bar-label\">Booked</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"chart-card\">\n                <h3>ðŸ“Š Booking Status - Pie Chart</h3>\n                <div className=\"pie-chart-container\">\n                  <div className=\"pie-chart-wrapper\">\n                    <svg className=\"pie-chart\" viewBox=\"0 0 200 200\">\n                      {(() => {\n                        const total = stats.totalBookings || 1;\n                        const pendingPercent = (stats.pendingBookings / total) * 100;\n                        const confirmedPercent = (stats.confirmedBookings / total) * 100;\n                        const cancelledPercent = (stats.cancelledBookings / total) * 100;\n                                                \n                        let currentPercent = 0;\n                        const radius = 80;\n                        const centerX = 100;\n                        const centerY = 100;\n                                                \n                        const createArc = (percent, color) => {\n                          if (percent === 0) return null;\n                          const startAngle = (currentPercent / 100) * 360 - 90;\n                          const endAngle = ((currentPercent + percent) / 100) * 360 - 90;\n                          currentPercent += percent;\n                                                    \n                          const startAngleRad = (startAngle * Math.PI) / 180;\n                          const endAngleRad = (endAngle * Math.PI) / 180;\n                                                    \n                          const x1 = centerX + radius * Math.cos(startAngleRad);\n                          const y1 = centerY + radius * Math.sin(startAngleRad);\n                          const x2 = centerX + radius * Math.cos(endAngleRad);\n                          const y2 = centerY + radius * Math.sin(endAngleRad);\n                                                    \n                          const largeArcFlag = percent > 50 ? 1 : 0;\n                                                    \n                          return (\n                            <path\n                              d={`M ${centerX} ${centerY} L ${x1} ${y1} A ${radius} ${radius} 0 ${largeArcFlag} 1 ${x2} ${y2} Z`}\n                              fill={color}\n                              stroke=\"#fff\"\n                              strokeWidth=\"3\"\n                            />\n                          );\n                        };\n                                                \n                        return (\n                          <>\n                            {createArc(pendingPercent, '#FF6B6B')}\n                            {createArc(confirmedPercent, '#51CF66')}\n                            {createArc(cancelledPercent, '#FF8787')}\n                          </>\n                        );\n                      })()}\n                      <circle cx=\"100\" cy=\"100\" r=\"60\" fill=\"white\" />\n                      <text x=\"100\" y=\"95\" textAnchor=\"middle\" fontSize=\"24\" fontWeight=\"800\" fill=\"#1e3c72\">\n                        {stats.totalBookings}\n                      </text>\n                      <text x=\"100\" y=\"115\" textAnchor=\"middle\" fontSize=\"14\" fill=\"#666\" fontWeight=\"600\">\n                        Total Bookings\n                      </text>\n                    </svg>\n                  </div>\n                  <div className=\"pie-legend\">\n                    <div className=\"legend-item\">\n                      <span className=\"legend-color\" style={{background: 'linear-gradient(135deg, #FF6B6B 0%, #FF8787 100%)'}}></span>\n                      <span className=\"legend-label\">Pending ({stats.pendingBookings})</span>\n                    </div>\n                    <div className=\"legend-item\">\n                      <span className=\"legend-color\" style={{background: 'linear-gradient(135deg, #51CF66 0%, #69DB7C 100%)'}}></span>\n                      <span className=\"legend-label\">Approved ({stats.confirmedBookings})</span>\n                    </div>\n                    <div className=\"legend-item\">\n                      <span className=\"legend-color\" style={{background: 'linear-gradient(135deg, #FF8787 0%, #FF6B6B 100%)'}}></span>\n                      <span className=\"legend-label\">Cancelled ({stats.cancelledBookings})</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'bookings' && (\n          <div className=\"admin-section\">\n            <div className=\"section-header-bookings\">\n              <h2>All Bookings ({bookings.length})</h2>\n              <p>Manage and track all vehicle bookings</p>\n            </div>\n            {loading ? (\n              <div className=\"loading\">Loading bookings...</div>\n            ) : (\n              <div className=\"bookings-table\">\n                {bookings.length === 0 ? (\n                  <div className=\"no-bookings\">\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{width: '60px', height: '60px', color: '#ccc', marginBottom: '20px'}}>\n                      <path d=\"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01\"/>\n                    </svg>\n                    <p>No bookings found.</p>\n                    <p style={{color: '#999', fontSize: '14px'}}>Bookings will appear here once customers make reservations.</p>\n                  </div>\n                ) : (\n                  bookings.map((booking) => {\n                    if (!booking.car) {\n                      return null;\n                    }\n                    const customerName = booking.customerName || booking.user?.name || 'Guest';\n                    const customerEmail = booking.customerEmail || booking.user?.email || 'N/A';\n                    return (\n                      <div key={booking._id} className=\"booking-row\">\n                        <div className=\"booking-info\">\n                          <h4>{booking.car?.name || 'Unknown Car'}</h4>\n                          <p>Customer: {customerName} ({customerEmail})</p>\n                          {booking.contactNumber && <p>Contact: {booking.contactNumber}</p>}\n                          <p>\n                            {new Date(booking.startDate).toLocaleDateString()} -{' '}\n                            {new Date(booking.endDate).toLocaleDateString()}\n                          </p>\n                          {booking.pickupLocation && <p>Location: {booking.pickupLocation}</p>}\n                          <p>Total: {booking.totalPrice} {booking.car?.currency || 'AED'}</p>\n                        </div>\n                        <div className=\"booking-actions\">\n                          {getStatusBadge(booking.status)}\n                          <select\n                            value={booking.status}\n                            onChange={(e) => handleUpdateBookingStatus(booking._id, e.target.value)}\n                            className=\"status-select\"\n                          >\n                            <option value=\"pending\">Pending</option>\n                            <option value=\"confirmed\">Approved</option>\n                            <option value=\"cancelled\">Cancelled</option>\n                          </select>\n                          {booking.status !== 'cancelled' && (\n                            <button\n                              onClick={() => handleCancelBooking(booking._id)}\n                              className=\"btn-cancel-booking\"\n                            >\n                              Cancel Booking\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    );\n                  })\n                )}\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'cars' && (\n          <div className=\"admin-section\">\n            <button\n              onClick={() => {\n                setShowCarForm(true);\n                setEditingCar(null);\n                setCarFormData({\n                  name: '',\n                  brand: '',\n                  model: '',\n                  year: new Date().getFullYear(),\n                  pricePerDay: '',\n                  price30min: '',\n                  price60min: '',\n                  currency: 'AED',\n                  seats: '',\n                  transmission: 'Automatic',\n                  fuelType: 'Petrol',\n                  image: '',\n                  description: '',\n                  available: true\n                });\n              }}\n              className=\"btn-add-car\"\n            >\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path d=\"M12 5V19M5 12H19\"/>\n              </svg>\n              Add New Car\n            </button>\n\n            {showCarForm && (\n              <div className=\"car-form-modal\">\n                <div className=\"car-form-content\">\n                  <h3>{editingCar ? 'Edit Car' : 'Add New Car'}</h3>\n                  <form onSubmit={handleCarSubmit}>\n                    <div className=\"form-row\">\n                      <div className=\"form-group\">\n                        <label>Name *</label>\n                        <input\n                          type=\"text\"\n                          name=\"name\"\n                          value={carFormData.name}\n                          onChange={handleCarFormChange}\n                          required\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <label>Brand *</label>\n                        <input\n                          type=\"text\"\n                          name=\"brand\"\n                          value={carFormData.brand}\n                          onChange={handleCarFormChange}\n                          required\n                        />\n                      </div>\n                    </div>\n                    <div className=\"form-row\">\n                      <div className=\"form-group\">\n                        <label>Model *</label>\n                        <input\n                          type=\"text\"\n                          name=\"model\"\n                          value={carFormData.model}\n                          onChange={handleCarFormChange}\n                          required\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <label>Year *</label>\n                        <input\n                          type=\"number\"\n                          name=\"year\"\n                          value={carFormData.year}\n                          onChange={handleCarFormChange}\n                          required\n                        />\n                      </div>\n                    </div>\n                    <div className=\"form-row\">\n                      <div className=\"form-group\">\n                        <label>Price per Day ({carFormData.currency || 'AED'}) *</label>\n                        <input\n                          type=\"number\"\n                          name=\"pricePerDay\"\n                          value={carFormData.pricePerDay}\n                          onChange={handleCarFormChange}\n                          required\n                          min=\"0\"\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <label>Price 60min ({carFormData.currency || 'AED'})</label>\n                        <input\n                          type=\"number\"\n                          name=\"price60min\"\n                          value={carFormData.price60min}\n                          onChange={handleCarFormChange}\n                          min=\"0\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"form-row\">\n                      <div className=\"form-group\">\n                        <label>Price 30min ({carFormData.currency || 'AED'})</label>\n                        <input\n                          type=\"number\"\n                          name=\"price30min\"\n                          value={carFormData.price30min}\n                          onChange={handleCarFormChange}\n                          min=\"0\"\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <label>Currency</label>\n                        <select\n                          name=\"currency\"\n                          value={carFormData.currency}\n                          onChange={handleCarFormChange}\n                        >\n                          <option value=\"AED\">AED</option>\n                          <option value=\"USD\">USD</option>\n                          <option value=\"EUR\">EUR</option>\n                        </select>\n                      </div>\n                    </div>\n                    <div className=\"form-row\">\n                      <div className=\"form-group\">\n                        <label>Seats *</label>\n                        <input\n                          type=\"number\"\n                          name=\"seats\"\n                          value={carFormData.seats}\n                          onChange={handleCarFormChange}\n                          required\n                          min=\"1\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"form-row\">\n                      <div className=\"form-group\">\n                        <label>Transmission *</label>\n                        <select\n                          name=\"transmission\"\n                          value={carFormData.transmission}\n                          onChange={handleCarFormChange}\n                          required\n                        >\n                          <option value=\"Manual\">Manual</option>\n                          <option value=\"Automatic\">Automatic</option>\n                        </select>\n                      </div>\n                      <div className=\"form-group\">\n                        <label>Fuel Type *</label>\n                        <select\n                          name=\"fuelType\"\n                          value={carFormData.fuelType}\n                          onChange={handleCarFormChange}\n                          required\n                        >\n                          <option value=\"Petrol\">Petrol</option>\n                          <option value=\"Diesel\">Diesel</option>\n                          <option value=\"Electric\">Electric</option>\n                          <option value=\"Hybrid\">Hybrid</option>\n                        </select>\n                      </div>\n                    </div>\n                    <div className=\"form-group\">\n                      <label>Vehicle Image *</label>\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleCarFormChange}\n                      />\n                      <input\n                        type=\"text\"\n                        name=\"imageUrl\"\n                        placeholder=\"OR paste image URL\"\n                        value={carFormData.imageUrl}\n                        onChange={(e) => {\n                          setCarFormData(prev => ({\n                            ...prev,\n                            imageUrl: e.target.value,\n                            imageFile: null\n                          }));\n                          setImagePreview(e.target.value);\n                        }}\n                        style={{ marginTop: '10px' }}\n                      />\n                      {imagePreview && (\n                        <div style={{ marginTop: '10px' }}>\n                          <img\n                            src={imagePreview}\n                            alt=\"preview\"\n                            style={{ width: '100%', height: '150px', objectFit: 'cover' }}\n                          />\n                          <button\n                            type=\"button\"\n                            onClick={() => {\n                              setCarFormData(prev => ({\n                                ...prev,\n                                imageFile: null,\n                                imageUrl: ''\n                              }));\n                              setImagePreview(null);\n                            }}\n                          >\n                            Remove\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"form-group\">\n                      <label>Description</label>\n                      <textarea\n                        name=\"description\"\n                        value={carFormData.description}\n                        onChange={handleCarFormChange}\n                        rows=\"3\"\n                      />\n                    </div>\n                    <div className=\"form-group\">\n                      <label>\n                        <input\n                          type=\"checkbox\"\n                          name=\"available\"\n                          checked={carFormData.available}\n                          onChange={handleCarFormChange}\n                        />\n                        Available\n                      </label>\n                    </div>\n                    <div className=\"form-actions\">\n                      <button type=\"submit\" className=\"btn btn-primary\">\n                        {editingCar ? 'Update Car' : 'Add Car'}\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setShowCarForm(false);\n                          setEditingCar(null);\n                        }}\n                        className=\"btn btn-secondary\"\n                      >\n                        Cancel\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            )}\n\n            {loading ? (\n              <div className=\"loading\">Loading cars...</div>\n            ) : (\n              <div className=\"cars-grid\">\n                {cars.map((car) => (\n                  <div key={car._id} className={`car-admin-card ${!car.available ? 'car-unavailable' : ''}`}>\n                    <div className=\"car-image-wrapper-admin\">\n                      <img src={car.image} alt={car.name} />\n                      {car.available ? (\n                        <span className=\"availability-badge-admin available\">âœ“ Available</span>\n                      ) : (\n                        <span className=\"availability-badge-admin unavailable\">âœ— Not Available</span>\n                      )}\n                    </div>\n                    <div className=\"car-admin-info\">\n                      <h4>{car.name}</h4>\n                      <p>{car.brand} {car.model} ({car.year})</p>\n                      <p>{car.price60min ? `${car.price60min} ${car.currency || 'AED'}/60min` : `${car.pricePerDay} ${car.currency || 'AED'}/day`}</p>\n                      <div className=\"car-admin-actions\">\n                        <button\n                          onClick={() => handleToggleAvailability(car._id, car.available)}\n                          className={`btn ${car.available ? 'btn-warning' : 'btn-success'}`}\n                          title={car.available ? 'Mark as Not Available' : 'Mark as Available'}\n                        >\n                          {car.available ? 'âœ— Mark Unavailable' : 'âœ“ Mark Available'}\n                        </button>\n                        <button\n                          onClick={() => handleEditCar(car)}\n                          className=\"btn btn-secondary\"\n                        >\n                          Edit\n                        </button>\n                        <button\n                          onClick={() => handleDeleteCar(car._id)}\n                          className=\"btn btn-danger\"\n                        >\n                          Delete\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"mappings":"iIAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC9D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,wBAAwB,CACpD,MAAO,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE9B,KAAM,CAAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}